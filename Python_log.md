[Running] python -u "c:\Users\user\OneDrive\ドキュメント\アノマリーFX\SAXO\自分用Saxo\saxo_bot\07_saxo_bot_07.py"
[2026-01-09 06:21:41] SAXO自動売買プログラム - 開始
[2026-01-09 06:21:43] Discord通知を送信しました。ステータス: 204
[2026-01-09 06:21:43] [ENV] LIVE selected. API_BASE=https://gateway.saxobank.com/openapi AUTH=https://live.logonvalidation.net/authorize TOKEN=https://live.logonvalidation.net/token STREAMING=wss://live-streaming.saxobank.com/oapi/streaming/ws CLIENT_ID=****************************2864
[2026-01-09 06:21:43] OAuth認証フローを開始します...
[2026-01-09 06:21:43] 指定されたパス C:\fx\saxo\msedgedriver.exe でのEdgeDriver起動に失敗: Message: Unable to obtain driver for MicrosoftEdge; For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors/driver_location
。デフォルトパスを試します。
[2026-01-09 06:21:51] Edge WebDriverが正常に作成されました。
[2026-01-09 06:21:51] 認証URLに移動します: https://live.logonvalidation.net/authorize?response_type=code&client_id=%2A%2A%2A%2A%2A&redirect_uri=%2A%2A%2A%2A%2A&code_challenge=%2A%2A%2A%2A%2A&code_challenge_method=S256&scope=openid+TradeAccess+ReadTrading+ReadAccount&state=%2A%2A%2A%2A%2A
[2026-01-09 06:21:55] ブラウザ経由でログインしてください。必要に応じてSMSコードを待機します (最大5分)。
[2026-01-09 06:21:56] ログイン情報を送信しました。リダイレクトを待機中: http://localhost:2983/saxo_live
[2026-01-09 06:22:47] リダイレクト先: http://localhost:2983/saxo_live?code=%2A%2A%2A%2A%2A&state=%2A%2A%2A%2A%2A#/lst/1767907363268
[2026-01-09 06:22:47] 認証コードを取得しました。
[2026-01-09 06:22:49] 一時ディレクトリ C:\fx\saxo\edge_user_data_1767907303_a8162e2e を削除しました。
[2026-01-09 06:22:49] 認証コードをトークンに交換しています...
[2026-01-09 06:22:50] アクセストークンを正常に取得しました。
[2026-01-09 06:22:51] アカウントキーを取得しています...
[2026-01-09 06:22:52] FX AccountKey: ********************vA==, ClientKey: ********************Vw== を AccountId: 77800/S151366 用に選択しました。
[2026-01-09 06:22:52] 取引ID 0 は本日実行対象外のためスキップします (指定曜日: mon)
[2026-01-09 06:22:52] 取引ID 1 は本日実行対象外のためスキップします (指定曜日: mon)
[2026-01-09 06:22:52] 取引ID 2 は本日実行対象外のためスキップします (指定曜日: mon)
[2026-01-09 06:22:52] 取引ID 3 は本日実行対象外のためスキップします (指定曜日: mon)
[2026-01-09 06:22:52] 取引ID 4 は本日実行対象外のためスキップします (指定曜日: mon)
[2026-01-09 06:22:52] 取引ID 5 は本日実行対象外のためスキップします (指定曜日: mon)
[2026-01-09 06:22:52] 取引ID 6 は本日実行対象外のためスキップします (指定曜日: mon)
[2026-01-09 06:22:52] 取引ID 7 は本日実行対象外のためスキップします (指定曜日: mon)
[2026-01-09 06:22:52] 取引ID 8 は本日実行対象外のためスキップします (指定曜日: mon)
[2026-01-09 06:22:52] 取引ID 9 は本日実行対象外のためスキップします (指定曜日: mon)
[2026-01-09 06:22:52] 取引ID 10 は本日実行対象外のためスキップします (指定曜日: mon)
[2026-01-09 06:22:52] 取引ID 11 は本日実行対象外のためスキップします (指定曜日: mon)
[2026-01-09 06:22:52] 取引ID 12 は本日実行対象外のためスキップします (指定曜日: tue)
[2026-01-09 06:22:52] 取引ID 13 は本日実行対象外のためスキップします (指定曜日: tue)
[2026-01-09 06:22:52] 取引ID 14 は本日実行対象外のためスキップします (指定曜日: tue)
[2026-01-09 06:22:52] 取引ID 15 は本日実行対象外のためスキップします (指定曜日: tue)
[2026-01-09 06:22:52] 取引ID 16 は本日実行対象外のためスキップします (指定曜日: tue)
[2026-01-09 06:22:52] 取引ID 17 は本日実行対象外のためスキップします (指定曜日: tue)
[2026-01-09 06:22:52] 取引ID 18 は本日実行対象外のためスキップします (指定曜日: tue)
[2026-01-09 06:22:52] 取引ID 19 は本日実行対象外のためスキップします (指定曜日: tue)
[2026-01-09 06:22:52] 取引ID 20 は本日実行対象外のためスキップします (指定曜日: tue)
[2026-01-09 06:22:52] 取引ID 21 は本日実行対象外のためスキップします (指定曜日: tue)
[2026-01-09 06:22:52] 取引ID 22 は本日実行対象外のためスキップします (指定曜日: tue)
[2026-01-09 06:22:52] 取引ID 23 は本日実行対象外のためスキップします (指定曜日: tue)
[2026-01-09 06:22:52] 取引ID 24 は本日実行対象外のためスキップします (指定曜日: wed)
[2026-01-09 06:22:52] 取引ID 25 は本日実行対象外のためスキップします (指定曜日: wed)
[2026-01-09 06:22:52] 取引ID 26 は本日実行対象外のためスキップします (指定曜日: wed)
[2026-01-09 06:22:52] 取引ID 27 は本日実行対象外のためスキップします (指定曜日: wed)
[2026-01-09 06:22:52] 取引ID 28 は本日実行対象外のためスキップします (指定曜日: wed)
[2026-01-09 06:22:52] 取引ID 29 は本日実行対象外のためスキップします (指定曜日: wed)
[2026-01-09 06:22:52] 取引ID 30 は本日実行対象外のためスキップします (指定曜日: wed)
[2026-01-09 06:22:52] 取引ID 31 は本日実行対象外のためスキップします (指定曜日: wed)
[2026-01-09 06:22:52] 取引ID 32 は本日実行対象外のためスキップします (指定曜日: wed)
[2026-01-09 06:22:52] 取引ID 33 は本日実行対象外のためスキップします (指定曜日: wed)
[2026-01-09 06:22:52] 取引ID 34 は本日実行対象外のためスキップします (指定曜日: wed)
[2026-01-09 06:22:52] 取引ID 35 は本日実行対象外のためスキップします (指定曜日: wed)
[2026-01-09 06:22:52] 取引ID 36 は本日実行対象外のためスキップします (指定曜日: thu)
[2026-01-09 06:22:52] 取引ID 37 は本日実行対象外のためスキップします (指定曜日: thu)
[2026-01-09 06:22:52] 取引ID 38 は本日実行対象外のためスキップします (指定曜日: thu)
[2026-01-09 06:22:52] 取引ID 39 は本日実行対象外のためスキップします (指定曜日: thu)
[2026-01-09 06:22:52] 取引ID 40 は本日実行対象外のためスキップします (指定曜日: thu)
[2026-01-09 06:22:52] 取引ID 41 は本日実行対象外のためスキップします (指定曜日: thu)
[2026-01-09 06:22:52] 取引ID 42 は本日実行対象外のためスキップします (指定曜日: thu)
[2026-01-09 06:22:52] 取引ID 43 は本日実行対象外のためスキップします (指定曜日: thu)
[2026-01-09 06:22:52] 取引ID 44 は本日実行対象外のためスキップします (指定曜日: thu)
[2026-01-09 06:22:52] 取引ID 45 は本日実行対象外のためスキップします (指定曜日: thu)
[2026-01-09 06:22:52] 取引ID 46 は本日実行対象外のためスキップします (指定曜日: thu)
[2026-01-09 06:22:52] 取引ID 47 は本日実行対象外のためスキップします (指定曜日: thu)
[2026-01-09 06:22:52] 'saxo_trades.csv' から本日実行対象の 12 件の取引を読み込み、時間順にソートしました。
[2026-01-09 06:22:52] 通貨ペアのUICマップを取得しています...
[2026-01-09 06:22:52] UICをマッピングしました: USD/JPY -> 42 (小数点以下桁数: 5)
[2026-01-09 06:22:52] ENSサブスクリプションを作成中...
[2026-01-09 06:22:52] ストリーミング用ContextId生成: ctx-7907372896-998qmwl4
[2026-01-09 06:22:53] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7907372896-998qmwl4&authorization=***
[2026-01-09 06:22:53] ENSクライアントを起動しました。
[2026-01-09 06:22:53] 口座残高を取得しています...ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7907372896-998qmwl4&authorization=***

[2026-01-09 06:22:53] 口座残高: 984104.0 JPY
[2026-01-09 06:22:53] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 06:22:54] Discord通知を送信しました。ステータス: 204
[2026-01-09 06:22:54] エントリー 取引ID 48 (USD/JPY Buy): 目標時刻=08:53:00, ゆらぎ=1.67秒, 最終実行時刻=08:52:58
[2026-01-09 06:22:54] 次のアクション 'PING_60S' まで 8943.66 秒待機します...
ENS WebSocket接続成功
ENS接続監視モニターを開始します。
⚠️ ENS無受信 10秒超過: 最終受信から15.0秒。再接続試行中=False
[2026-01-09 06:23:11] Discord通知を送信しました。ステータス: 204
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 06:40:54] アクセストークンを更新しています...
[2026-01-09 06:40:56] アクセストークンを正常に更新しました。
[2026-01-09 06:40:56] ストリーミング再認可を実行します: contextId=ctx-7907372896-998qmwl4
[2026-01-09 06:40:58] ストリーミング再認可が未対応のため無効化します: /streamingws/authorize
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 06:42:39, last_message_id=58, last_ping_ok_at=2026-01-09 06:42:51, last_ping_rtt_ms=0.3
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=False, contextId=ctx-7907372896-998qmwl4, messageid=58
[2026-01-09 06:43:00] アクセストークンを更新しています...
[2026-01-09 06:43:01] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7907372896-998qmwl4&authorization=***&messageid=58
ENS monitor task cancelled
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7907372896-998qmwl4, messageid=0
[2026-01-09 06:43:03] アクセストークンを更新しています...
[2026-01-09 06:43:04] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 06:43:04] ENSサブスクリプションを作成中...
[2026-01-09 06:43:04] ストリーミング用ContextId生成: ctx-7908584763-4i1l9q8w
[2026-01-09 06:43:06] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7908584763-4i1l9q8w&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7908584763-4i1l9q8w&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 06:58:58] アクセストークンを更新しています...
[2026-01-09 06:58:59] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 07:02:52, last_message_id=58, last_ping_ok_at=2026-01-09 07:03:03, last_ping_rtt_ms=0.3
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS ping失敗: no close frame received or sent (ConnectionClosedError)
ENS再接続開始: force_new_context=False, contextId=ctx-7908584763-4i1l9q8w, messageid=58
[2026-01-09 07:03:13] アクセストークンを更新しています...
[2026-01-09 07:03:16] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7908584763-4i1l9q8w&authorization=***&messageid=58
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7908584763-4i1l9q8w, messageid=0
[2026-01-09 07:03:18] アクセストークンを更新しています...
[2026-01-09 07:03:19] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 07:03:19] ENSサブスクリプションを作成中...
[2026-01-09 07:03:19] ストリーミング用ContextId生成: ctx-7909799898-qfyzmc7s
[2026-01-09 07:03:21] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7909799898-qfyzmc7s&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7909799898-qfyzmc7s&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 07:16:59] アクセストークンを更新しています...
[2026-01-09 07:17:01] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 07:23:06, last_message_id=58, last_ping_ok_at=2026-01-09 07:23:18, last_ping_rtt_ms=0.4
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=False, contextId=ctx-7909799898-qfyzmc7s, messageid=58
[2026-01-09 07:23:27] アクセストークンを更新しています...
ENS ping失敗: no close frame received or sent (ConnectionClosedError)
[2026-01-09 07:23:28] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7909799898-qfyzmc7s&authorization=***&messageid=58
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS接続監視モニターを開始します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7909799898-qfyzmc7s, messageid=0
[2026-01-09 07:23:30] アクセストークンを更新しています...
[2026-01-09 07:23:31] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 07:23:31] ENSサブスクリプションを作成中...
[2026-01-09 07:23:31] ストリーミング用ContextId生成: ctx-7911011986-ofij1t35
[2026-01-09 07:23:33] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7911011986-ofij1t35&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7911011986-ofij1t35&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 07:35:01] アクセストークンを更新しています...
[2026-01-09 07:35:02] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 07:43:19, last_message_id=58, last_ping_ok_at=2026-01-09 07:43:30, last_ping_rtt_ms=0.4
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS ping失敗: no close frame received or sent (ConnectionClosedError)
ENS再接続開始: force_new_context=False, contextId=ctx-7911011986-ofij1t35, messageid=58
[2026-01-09 07:43:40] アクセストークンを更新しています...
[2026-01-09 07:43:42] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7911011986-ofij1t35&authorization=***&messageid=58
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7911011986-ofij1t35, messageid=0
[2026-01-09 07:43:44] アクセストークンを更新しています...
[2026-01-09 07:43:45] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 07:43:45] ENSサブスクリプションを作成中...
[2026-01-09 07:43:45] ストリーミング用ContextId生成: ctx-7912225299-94m8p2n9
[2026-01-09 07:43:46] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7912225299-94m8p2n9&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7912225299-94m8p2n9&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 07:53:02] アクセストークンを更新しています...
[2026-01-09 07:53:03] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 08:03:33, last_message_id=58, last_ping_ok_at=2026-01-09 08:03:43, last_ping_rtt_ms=0.3
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS ping失敗: no close frame received or sent (ConnectionClosedError)
ENS再接続開始: force_new_context=False, contextId=ctx-7912225299-94m8p2n9, messageid=58
[2026-01-09 08:03:54] アクセストークンを更新しています...
[2026-01-09 08:03:55] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7912225299-94m8p2n9&authorization=***&messageid=58
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7912225299-94m8p2n9, messageid=0
[2026-01-09 08:03:58] アクセストークンを更新しています...
[2026-01-09 08:03:59] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 08:03:59] ENSサブスクリプションを作成中...
[2026-01-09 08:03:59] ストリーミング用ContextId生成: ctx-7913439237-5vwpijlw
[2026-01-09 08:04:00] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7913439237-5vwpijlw&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7913439237-5vwpijlw&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 08:11:03] アクセストークンを更新しています...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 08:11:05] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 08:23:46, last_message_id=58, last_ping_ok_at=2026-01-09 08:23:57, last_ping_rtt_ms=0.3
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS ping失敗: no close frame received or sent (ConnectionClosedError)
ENS再接続開始: force_new_context=False, contextId=ctx-7913439237-5vwpijlw, messageid=58
[2026-01-09 08:24:07] アクセストークンを更新しています...
[2026-01-09 08:24:09] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7913439237-5vwpijlw&authorization=***&messageid=58
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7913439237-5vwpijlw, messageid=0
[2026-01-09 08:24:11] アクセストークンを更新しています...
[2026-01-09 08:24:12] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 08:24:12] ENSサブスクリプションを作成中...
[2026-01-09 08:24:12] ストリーミング用ContextId生成: ctx-7914652764-13075qx5
[2026-01-09 08:24:14] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7914652764-13075qx5&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7914652764-13075qx5&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 08:29:05] アクセストークンを更新しています...
[2026-01-09 08:29:06] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 08:44:00, last_message_id=58, last_ping_ok_at=2026-01-09 08:44:11, last_ping_rtt_ms=0.4
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS ping失敗: no close frame received or sent (ConnectionClosedError)
ENS再接続開始: force_new_context=False, contextId=ctx-7914652764-13075qx5, messageid=58
[2026-01-09 08:44:21] アクセストークンを更新しています...
[2026-01-09 08:44:22] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7914652764-13075qx5&authorization=***&messageid=58
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7914652764-13075qx5, messageid=0
[2026-01-09 08:44:25] アクセストークンを更新しています...
[2026-01-09 08:44:26] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 08:44:26] ENSサブスクリプションを作成中...
[2026-01-09 08:44:26] ストリーミング用ContextId生成: ctx-7915866208-5r67jfet
[2026-01-09 08:44:27] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7915866208-5r67jfet&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7915866208-5r67jfet&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 08:47:06] アクセストークンを更新しています...
[2026-01-09 08:47:07] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 08:51:58] 接続の事前確認 (PING_60S) を行います...
[2026-01-09 08:51:58] 現在のアクセストークンを検証しています...
[2026-01-09 08:51:58] トークン検証成功。
[2026-01-09 08:51:58] 事前確認 (PING_60S) 成功。
[2026-01-09 08:51:58] 次のアクション 'PING_30S' まで 29.94 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 08:52:28] 接続の事前確認 (PING_30S) を行います...
[2026-01-09 08:52:28] 現在のアクセストークンを検証しています...
[2026-01-09 08:52:28] トークン検証成功。
[2026-01-09 08:52:28] 事前確認 (PING_30S) 成功。
[2026-01-09 08:52:28] 次のアクション 'FINAL_ACTION' まで 29.72 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 08:52:58] エントリー 取引ID 48 (USD/JPY Buy) の実行時刻になりました。
[2026-01-09 08:52:58] --- 取引ID 48 (USD/JPY Buy) のエントリー処理開始 ---
[2026-01-09 08:52:58] 価格情報を取得します。UICs: 42, AssetType: FxSpot, FieldGroups: Quote,DisplayAndFormat,PriceInfo
[2026-01-09 08:52:58] エントリー処理開始 (UIC: 42, Side: Buy, Amount: 50000.0)...
[2026-01-09 08:52:58] UIC 42 の既存取引（ポジション/Working注文）を確認中...
[2026-01-09 08:52:59] UIC 42 の既存取引は見つかりませんでした。
[2026-01-09 08:52:59] 既存取引がないため、新規注文を発注します...
[2026-01-09 08:52:59] 価格情報を取得します。UICs: 42, AssetType: FxSpot, FieldGroups: Quote,DisplayAndFormat
[2026-01-09 08:52:59] 関連注文を確認: 1件
[2026-01-09 08:52:59] ✅ SL注文が成立: OrderId=5358697687, Type=None
[2026-01-09 08:52:59]   関連注文1: OrderId=5358697687, Status=None, Type=None
[2026-01-09 08:52:59] Market + SL 注文送信完了: OrderId=5358697686
[2026-01-09 08:52:59] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 08:52:59] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 08:52:59] ENSイベントを監視中 (OrderID: 5358697686, UIC: 42, タイプ: ['order_fill'])...
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-08T23:52:59.665393Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Buy', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': '5712c65d-8427-4322-a1e0-00a38524d137', 'Duration': {'DurationType': 'DayOrder'}, 'ExternalReference': '20260109_trade_48_entry_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358697686', 'OrderRelation': 'IfDoneMaster', 'OrderType': 'Market', 'RelatedOrderId': ['5358697687'], 'RelatedOrderIds': ['5358697687'], 'SequenceId': '2903027528', 'Status': 'Placed', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-08T23:52:59.665393Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Sell', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': '5712c65d-8427-4322-a1e0-00a38524d137', 'Duration': {'DurationType': 'GoodTillCancel'}, 'ExternalReference': '20260109_trade_48_entry_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358697687', 'OrderRelation': 'IfDoneSlave', 'OrderType': 'Stop', 'Price': 154.89, 'RelatedOrderId': ['5358697686'], 'RelatedOrderIds': ['5358697686'], 'SequenceId': '2903027529', 'Status': 'Placed', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-08T23:52:59.666382Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'AveragePrice': 156.894, 'BuySell': 'Buy', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': '5712c65d-8427-4322-a1e0-00a38524d137', 'Duration': {'DurationType': 'DayOrder'}, 'ExecutionPrice': 156.894, 'ExternalReference': '20260109_trade_48_entry_v1', 'FillAmount': 50000.0, 'FilledAmount': 50000.0, 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358697686', 'OrderRelation': 'IfDoneMaster', 'OrderType': 'Market', 'PositionId': '7426125957', 'RelatedOrderId': ['5358697687'], 'RelatedOrderIds': ['5358697687'], 'SequenceId': '2903027531', 'Status': 'FinalFill', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42, 'ValueDate': '2026-01-14', 'Venue': 'XXXX'}
✨ ENSから注文完全約定イベント: OrderID=5358697686, Price=156.894
[2026-01-09 08:53:00] ★ ENSで期待するイベント(order_fill)を受信しました: {'type': 'order_fill', 'order_id': '5358697686', 'execution_price': Decimal('156.894'), 'execution_time': '2026-01-08T23:52:59.666382Z', 'filled_amount': Decimal('50000.0'), 'amount': Decimal('50000.0'), 'status': 'filled', 'uic': 42, 'position_id': '7426125957'}
[2026-01-09 08:53:00] ✅ エントリー成功: 取引ID 48 (USD/JPY Buy)
[2026-01-09 08:53:01] Discord通知を送信しました。ステータス: 204
[2026-01-09 08:53:01] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 08:53:01] 決済 取引ID 48 (USD/JPY Buy): 目標時刻=08:57:58, ゆらぎ=1.56秒, 最終実行時刻=08:57:56
[2026-01-09 08:53:01] 次のアクション 'PING_60S' まで 235.00 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 08:56:56] 接続の事前確認 (PING_60S) を行います...
[2026-01-09 08:56:56] 現在のアクセストークンを検証しています...
[2026-01-09 08:56:56] トークン検証成功。
[2026-01-09 08:56:56] 事前確認 (PING_60S) 成功。
[2026-01-09 08:56:56] 次のアクション 'PING_30S' まで 29.71 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 08:57:26] 接続の事前確認 (PING_30S) を行います...
[2026-01-09 08:57:26] 現在のアクセストークンを検証しています...
[2026-01-09 08:57:26] トークン検証成功。
[2026-01-09 08:57:26] 事前確認 (PING_30S) 成功。
[2026-01-09 08:57:26] 次のアクション 'FINAL_ACTION' まで 29.70 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 08:57:56] 決済 取引ID 48 (USD/JPY Buy) の実行時刻になりました。
[2026-01-09 08:57:56] --- 取引ID 48 (USD/JPY Buy) の決済処理開始 ---
[2026-01-09 08:57:56] ポジション情報を検索中 (UIC: 42)...
[2026-01-09 08:57:56] UIC 42 の最新ポジションを発見しました。
[2026-01-09 08:57:57] UIC 42 のSL候補注文はありません。追跡IDがないため全Working注文をキャンセルします。
[2026-01-09 08:57:57] 注文キャンセルを実行しました: OrderId=5358697687
[2026-01-09 08:57:57] ポジション 7426125957 (USD/JPY) の決済処理開始...
[2026-01-09 08:57:57] ポジション情報を検索中 (UIC: 42)...
[2026-01-09 08:57:57] UIC 42 の最新ポジションを発見しました。
[2026-01-09 08:57:57] 決済注文データ: Sell 50000.0 units of UIC 42
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-08T23:57:57.233158Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Sell', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': '5712c65d-8427-4322-a1e0-00a38524d137', 'Duration': {'DurationType': 'GoodTillCancel'}, 'ExternalReference': '20260109_trade_48_entry_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358697687', 'OrderRelation': 'StandAlone', 'OrderType': 'Stop', 'Price': 154.89, 'SequenceId': '2903028261', 'Status': 'Cancelled', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
🧹 SL注文がキャンセル: OrderID=5358697687, Status=cancelled
ENSから注文ステータス変更イベント: OrderID=5358697687, Status=cancelled
[2026-01-09 08:57:57] USD/JPY の決済注文が受付されました。OrderId: 5358697711
[2026-01-09 08:57:57] 決済注文が受付されました。OrderID: 5358697711
[2026-01-09 08:57:57] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 08:57:57] ENSイベントを監視中 (OrderID: 5358697711, UIC: 42, タイプ: ['order_fill'])...
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-08T23:57:57.835185Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Sell', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': '14d9f11d-d2f2-4254-8138-903171c66569', 'Duration': {'DurationType': 'DayOrder'}, 'ExternalReference': '20260109_trade_48_exit_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358697711', 'OrderRelation': 'StandAlone', 'OrderType': 'Market', 'SequenceId': '2903028263', 'Status': 'Placed', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-08T23:57:57.835185Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'AveragePrice': 156.897, 'BuySell': 'Sell', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': '14d9f11d-d2f2-4254-8138-903171c66569', 'Duration': {'DurationType': 'DayOrder'}, 'ExecutionPrice': 156.897, 'ExternalReference': '20260109_trade_48_exit_v1', 'FillAmount': 50000.0, 'FilledAmount': 50000.0, 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358697711', 'OrderRelation': 'StandAlone', 'OrderType': 'Market', 'PositionId': '7426125987', 'SequenceId': '2903028265', 'Status': 'FinalFill', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42, 'ValueDate': '2026-01-14', 'Venue': 'XXXX'}
✨ ENSから注文完全約定イベント: OrderID=5358697711, Price=156.897
[2026-01-09 08:57:58] ★ ENSで期待するイベント(order_fill)を受信しました: {'type': 'order_fill', 'order_id': '5358697711', 'execution_price': Decimal('156.897'), 'execution_time': '2026-01-08T23:57:57.835185Z', 'filled_amount': Decimal('50000.0'), 'amount': Decimal('50000.0'), 'status': 'filled', 'uic': 42, 'position_id': '7426125987'}
[2026-01-09 08:57:58] イベント 'order_fill' により決済を確認しました。
[2026-01-09 08:57:58] ポジション情報を検索中 (UIC: 42)...
[2026-01-09 08:57:58] ClosedPositionsに該当がなくても保有ポジションなしと判定: UIC=42
[2026-01-09 08:58:00] Discord通知を送信しました。ステータス: 204
[2026-01-09 08:58:00] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 08:58:00] エントリー 取引ID 49 (USD/JPY Sell): 目標時刻=08:58:02, ゆらぎ=1.55秒, 最終実行時刻=08:58:00
[2026-01-09 08:58:00] 次のアクション 'FINAL_ACTION' まで 0.17 秒待機します...
[2026-01-09 08:58:00] エントリー 取引ID 49 (USD/JPY Sell) の実行時刻になりました。
[2026-01-09 08:58:00] --- 取引ID 49 (USD/JPY Sell) のエントリー処理開始 ---
[2026-01-09 08:58:00] 価格情報を取得します。UICs: 42, AssetType: FxSpot, FieldGroups: Quote,DisplayAndFormat,PriceInfo
[2026-01-09 08:58:00] エントリー処理開始 (UIC: 42, Side: Sell, Amount: 50000.0)...
[2026-01-09 08:58:00] UIC 42 の既存取引（ポジション/Working注文）を確認中...
[2026-01-09 08:58:01] UIC 42 の既存取引は見つかりませんでした。
[2026-01-09 08:58:01] 既存取引がないため、新規注文を発注します...
[2026-01-09 08:58:01] 価格情報を取得します。UICs: 42, AssetType: FxSpot, FieldGroups: Quote,DisplayAndFormat
[2026-01-09 08:58:01] 関連注文を確認: 1件
[2026-01-09 08:58:01] ✅ SL注文が成立: OrderId=5358697713, Type=None
[2026-01-09 08:58:01]   関連注文1: OrderId=5358697713, Status=None, Type=None
[2026-01-09 08:58:01] Market + SL 注文送信完了: OrderId=5358697712
[2026-01-09 08:58:01] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 08:58:01] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 08:58:01] ENSイベントを監視中 (OrderID: 5358697712, UIC: 42, タイプ: ['order_fill'])...
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-08T23:58:01.756492Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Sell', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': 'e1dc220a-651f-45cb-b1aa-69b717b1a84c', 'Duration': {'DurationType': 'DayOrder'}, 'ExternalReference': '20260109_trade_49_entry_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358697712', 'OrderRelation': 'IfDoneMaster', 'OrderType': 'Market', 'RelatedOrderId': ['5358697713'], 'RelatedOrderIds': ['5358697713'], 'SequenceId': '2903028278', 'Status': 'Placed', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-08T23:58:01.756492Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Buy', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': 'e1dc220a-651f-45cb-b1aa-69b717b1a84c', 'Duration': {'DurationType': 'GoodTillCancel'}, 'ExternalReference': '20260109_trade_49_entry_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358697713', 'OrderRelation': 'IfDoneSlave', 'OrderType': 'Stop', 'Price': 158.9, 'RelatedOrderId': ['5358697712'], 'RelatedOrderIds': ['5358697712'], 'SequenceId': '2903028279', 'Status': 'Placed', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-08T23:58:01.757641Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'AveragePrice': 156.896, 'BuySell': 'Sell', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': 'e1dc220a-651f-45cb-b1aa-69b717b1a84c', 'Duration': {'DurationType': 'DayOrder'}, 'ExecutionPrice': 156.896, 'ExternalReference': '20260109_trade_49_entry_v1', 'FillAmount': 50000.0, 'FilledAmount': 50000.0, 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358697712', 'OrderRelation': 'IfDoneMaster', 'OrderType': 'Market', 'PositionId': '7426125991', 'RelatedOrderId': ['5358697713'], 'RelatedOrderIds': ['5358697713'], 'SequenceId': '2903028281', 'Status': 'FinalFill', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42, 'ValueDate': '2026-01-14', 'Venue': 'XXXX'}
✨ ENSから注文完全約定イベント: OrderID=5358697712, Price=156.896
[2026-01-09 08:58:02] ★ ENSで期待するイベント(order_fill)を受信しました: {'type': 'order_fill', 'order_id': '5358697712', 'execution_price': Decimal('156.896'), 'execution_time': '2026-01-08T23:58:01.757641Z', 'filled_amount': Decimal('50000.0'), 'amount': Decimal('50000.0'), 'status': 'filled', 'uic': 42, 'position_id': '7426125991'}
[2026-01-09 08:58:02] ✅ エントリー成功: 取引ID 49 (USD/JPY Sell)
[2026-01-09 08:58:03] Discord通知を送信しました。ステータス: 204
[2026-01-09 08:58:03] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 08:58:03] 決済 取引ID 49 (USD/JPY Sell): 目標時刻=09:03:00, ゆらぎ=1.13秒, 最終実行時刻=09:02:58
[2026-01-09 08:58:03] 次のアクション 'PING_60S' まで 235.25 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 09:01:58] 接続の事前確認 (PING_60S) を行います...
[2026-01-09 09:01:58] 現在のアクセストークンを検証しています...
[2026-01-09 09:01:59] トークン検証成功。
[2026-01-09 09:01:59] 事前確認 (PING_60S) 成功。
[2026-01-09 09:01:59] 次のアクション 'PING_30S' まで 29.72 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 09:02:28] 接続の事前確認 (PING_30S) を行います...
[2026-01-09 09:02:28] 現在のアクセストークンを検証しています...
[2026-01-09 09:02:29] トークン検証成功。
[2026-01-09 09:02:29] 事前確認 (PING_30S) 成功。
[2026-01-09 09:02:29] 次のアクション 'FINAL_ACTION' まで 29.71 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 09:02:58] 決済 取引ID 49 (USD/JPY Sell) の実行時刻になりました。
[2026-01-09 09:02:58] --- 取引ID 49 (USD/JPY Sell) の決済処理開始 ---
[2026-01-09 09:02:58] ポジション情報を検索中 (UIC: 42)...
[2026-01-09 09:02:59] UIC 42 の最新ポジションを発見しました。
[2026-01-09 09:02:59] UIC 42 のSL候補注文はありません。追跡IDがないため全Working注文をキャンセルします。
[2026-01-09 09:02:59] 注文キャンセルを実行しました: OrderId=5358697713
[2026-01-09 09:02:59] ポジション 7426125991 (USD/JPY) の決済処理開始...
[2026-01-09 09:02:59] ポジション情報を検索中 (UIC: 42)...
[2026-01-09 09:03:00] UIC 42 の最新ポジションを発見しました。
[2026-01-09 09:03:00] 決済注文データ: Buy 50000.0 units of UIC 42
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T00:02:59.633473Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Buy', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': 'e1dc220a-651f-45cb-b1aa-69b717b1a84c', 'Duration': {'DurationType': 'GoodTillCancel'}, 'ExternalReference': '20260109_trade_49_entry_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358697713', 'OrderRelation': 'StandAlone', 'OrderType': 'Stop', 'Price': 158.9, 'SequenceId': '2903029669', 'Status': 'Cancelled', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
🧹 SL注文がキャンセル: OrderID=5358697713, Status=cancelled
ENSから注文ステータス変更イベント: OrderID=5358697713, Status=cancelled
[2026-01-09 09:03:00] USD/JPY の決済注文が受付されました。OrderId: 5358699072
[2026-01-09 09:03:00] 決済注文が受付されました。OrderID: 5358699072
[2026-01-09 09:03:00] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 09:03:00] ENSイベントを監視中 (OrderID: 5358699072, UIC: 42, タイプ: ['order_fill'])...
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T00:03:00.267490Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Buy', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': '2aea0f80-ac6e-49d8-a0de-95dda1fe1bf8', 'Duration': {'DurationType': 'DayOrder'}, 'ExternalReference': '20260109_trade_49_exit_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358699072', 'OrderRelation': 'StandAlone', 'OrderType': 'Market', 'SequenceId': '2903029675', 'Status': 'Placed', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T00:03:00.268491Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'AveragePrice': 156.908, 'BuySell': 'Buy', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': '2aea0f80-ac6e-49d8-a0de-95dda1fe1bf8', 'Duration': {'DurationType': 'DayOrder'}, 'ExecutionPrice': 156.908, 'ExternalReference': '20260109_trade_49_exit_v1', 'FillAmount': 50000.0, 'FilledAmount': 50000.0, 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358699072', 'OrderRelation': 'StandAlone', 'OrderType': 'Market', 'PositionId': '7426129004', 'SequenceId': '2903029677', 'Status': 'FinalFill', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42, 'ValueDate': '2026-01-14', 'Venue': 'XXXX'}
✨ ENSから注文完全約定イベント: OrderID=5358699072, Price=156.908
[2026-01-09 09:03:00] ★ ENSで期待するイベント(order_fill)を受信しました: {'type': 'order_fill', 'order_id': '5358699072', 'execution_price': Decimal('156.908'), 'execution_time': '2026-01-09T00:03:00.268491Z', 'filled_amount': Decimal('50000.0'), 'amount': Decimal('50000.0'), 'status': 'filled', 'uic': 42, 'position_id': '7426129004'}
[2026-01-09 09:03:00] イベント 'order_fill' により決済を確認しました。
[2026-01-09 09:03:00] ポジション情報を検索中 (UIC: 42)...
[2026-01-09 09:03:01] エントリー 取引ID 50 (USD/JPY Sell): 目標時刻=09:21:00, ゆらぎ=2.85秒, 最終実行時刻=09:20:57
[2026-01-09 09:03:01] 次のアクション 'PING_60S' まで 1015.75 秒待機します...
[2026-01-09 09:03:02] ClosedPositionsに該当がなくても保有ポジションなしと判定: UIC=42
[2026-01-09 09:03:03] Discord通知を送信しました。ステータス: 204
[2026-01-09 09:03:03] 取引ステータスを trade_status.json に保存しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 09:04:24, last_message_id=72, last_ping_ok_at=2026-01-09 09:04:34, last_ping_rtt_ms=0.4
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=False, contextId=ctx-7915866208-5r67jfet, messageid=72
[2026-01-09 09:04:38] アクセストークンを更新しています...
[2026-01-09 09:04:39] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7915866208-5r67jfet&authorization=***&messageid=72
ENS monitor task cancelled
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7915866208-5r67jfet, messageid=0
[2026-01-09 09:04:41] アクセストークンを更新しています...
[2026-01-09 09:04:42] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 09:04:42] ENSサブスクリプションを作成中...
[2026-01-09 09:04:42] ストリーミング用ContextId生成: ctx-7917082900-nj5pulq9
[2026-01-09 09:04:43] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7917082900-nj5pulq9&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7917082900-nj5pulq9&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 09:05:07] アクセストークンを更新しています...
[2026-01-09 09:05:09] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 09:19:57] 接続の事前確認 (PING_60S) を行います...
[2026-01-09 09:19:57] 現在のアクセストークンを検証しています...
[2026-01-09 09:19:58] トークン検証成功。
[2026-01-09 09:19:58] 事前確認 (PING_60S) 成功。
[2026-01-09 09:19:58] 次のアクション 'PING_30S' まで 28.63 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 09:20:27] 接続の事前確認 (PING_30S) を行います...
[2026-01-09 09:20:27] 現在のアクセストークンを検証しています...
[2026-01-09 09:20:27] トークン検証成功。
[2026-01-09 09:20:27] 事前確認 (PING_30S) 成功。
[2026-01-09 09:20:27] 次のアクション 'FINAL_ACTION' まで 29.71 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 09:20:57] エントリー 取引ID 50 (USD/JPY Sell) の実行時刻になりました。
[2026-01-09 09:20:57] --- 取引ID 50 (USD/JPY Sell) のエントリー処理開始 ---
[2026-01-09 09:20:57] 価格情報を取得します。UICs: 42, AssetType: FxSpot, FieldGroups: Quote,DisplayAndFormat,PriceInfo
[2026-01-09 09:20:57] エントリー処理開始 (UIC: 42, Side: Sell, Amount: 50000.0)...
[2026-01-09 09:20:57] UIC 42 の既存取引（ポジション/Working注文）を確認中...
[2026-01-09 09:20:58] UIC 42 の既存取引は見つかりませんでした。
[2026-01-09 09:20:58] 既存取引がないため、新規注文を発注します...
[2026-01-09 09:20:58] 価格情報を取得します。UICs: 42, AssetType: FxSpot, FieldGroups: Quote,DisplayAndFormat
[2026-01-09 09:20:58] 関連注文を確認: 1件
[2026-01-09 09:20:58] ✅ SL注文が成立: OrderId=5358699763, Type=None
[2026-01-09 09:20:58]   関連注文1: OrderId=5358699763, Status=None, Type=None
[2026-01-09 09:20:58] Market + SL 注文送信完了: OrderId=5358699162
[2026-01-09 09:20:58] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 09:20:58] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 09:20:58] ENSイベントを監視中 (OrderID: 5358699162, UIC: 42, タイプ: ['order_fill'])...
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T00:20:58.546209Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Sell', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': '854d9a81-ea13-4e7c-b909-ca5b9d9f2527', 'Duration': {'DurationType': 'DayOrder'}, 'ExternalReference': '20260109_trade_50_entry_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358699162', 'OrderRelation': 'IfDoneMaster', 'OrderType': 'Market', 'RelatedOrderId': ['5358699763'], 'RelatedOrderIds': ['5358699763'], 'SequenceId': '2903072121', 'Status': 'Placed', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T00:20:58.546209Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Buy', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': '854d9a81-ea13-4e7c-b909-ca5b9d9f2527', 'Duration': {'DurationType': 'GoodTillCancel'}, 'ExternalReference': '20260109_trade_50_entry_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358699763', 'OrderRelation': 'IfDoneSlave', 'OrderType': 'Stop', 'Price': 158.94, 'RelatedOrderId': ['5358699162'], 'RelatedOrderIds': ['5358699162'], 'SequenceId': '2903072122', 'Status': 'Placed', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T00:20:58.547212Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'AveragePrice': 156.934, 'BuySell': 'Sell', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': '854d9a81-ea13-4e7c-b909-ca5b9d9f2527', 'Duration': {'DurationType': 'DayOrder'}, 'ExecutionPrice': 156.934, 'ExternalReference': '20260109_trade_50_entry_v1', 'FillAmount': 50000.0, 'FilledAmount': 50000.0, 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358699162', 'OrderRelation': 'IfDoneMaster', 'OrderType': 'Market', 'PositionId': '7426131169', 'RelatedOrderId': ['5358699763'], 'RelatedOrderIds': ['5358699763'], 'SequenceId': '2903072124', 'Status': 'FinalFill', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42, 'ValueDate': '2026-01-14', 'Venue': 'XXXX'}
✨ ENSから注文完全約定イベント: OrderID=5358699162, Price=156.934
[2026-01-09 09:20:59] ★ ENSで期待するイベント(order_fill)を受信しました: {'type': 'order_fill', 'order_id': '5358699162', 'execution_price': Decimal('156.934'), 'execution_time': '2026-01-09T00:20:58.547212Z', 'filled_amount': Decimal('50000.0'), 'amount': Decimal('50000.0'), 'status': 'filled', 'uic': 42, 'position_id': '7426131169'}
[2026-01-09 09:20:59] ✅ エントリー成功: 取引ID 50 (USD/JPY Sell)
[2026-01-09 09:21:03] Discord通知を送信しました。ステータス: 204
[2026-01-09 09:21:03] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 09:21:03] 決済 取引ID 50 (USD/JPY Sell): 目標時刻=09:25:00, ゆらぎ=1.80秒, 最終実行時刻=09:24:58
[2026-01-09 09:21:03] 次のアクション 'PING_60S' まで 174.94 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 09:23:09] アクセストークンを更新しています...
[2026-01-09 09:23:10] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 09:23:58] 接続の事前確認 (PING_60S) を行います...
[2026-01-09 09:23:58] 現在のアクセストークンを検証しています...
[2026-01-09 09:23:58] トークン検証成功。
[2026-01-09 09:23:58] 事前確認 (PING_60S) 成功。
[2026-01-09 09:23:58] 次のアクション 'PING_30S' まで 29.71 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 09:24:28] 接続の事前確認 (PING_30S) を行います...
[2026-01-09 09:24:28] 現在のアクセストークンを検証しています...
[2026-01-09 09:24:28] トークン検証成功。
[2026-01-09 09:24:28] 事前確認 (PING_30S) 成功。
[2026-01-09 09:24:28] 次のアクション 'FINAL_ACTION' まで 29.71 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 09:24:58] 決済 取引ID 50 (USD/JPY Sell) の実行時刻になりました。
[2026-01-09 09:24:58] --- 取引ID 50 (USD/JPY Sell) の決済処理開始 ---
[2026-01-09 09:24:58] ポジション情報を検索中 (UIC: 42)...
[2026-01-09 09:24:58] UIC 42 の最新ポジションを発見しました。
[2026-01-09 09:24:58] UIC 42 のSL候補注文はありません。追跡IDがないため全Working注文をキャンセルします。
[2026-01-09 09:24:59] 注文キャンセルを実行しました: OrderId=5358699763
[2026-01-09 09:24:59] ポジション 7426131169 (USD/JPY) の決済処理開始...
[2026-01-09 09:24:59] ポジション情報を検索中 (UIC: 42)...
[2026-01-09 09:24:59] UIC 42 の最新ポジションを発見しました。
[2026-01-09 09:24:59] 決済注文データ: Buy 50000.0 units of UIC 42
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 09:24:41, last_message_id=62, last_ping_ok_at=2026-01-09 09:24:53, last_ping_rtt_ms=0.3
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
[2026-01-09 09:24:59] USD/JPY の決済注文が受付されました。OrderId: 5358699781
[2026-01-09 09:24:59] 決済注文が受付されました。OrderID: 5358699781
[2026-01-09 09:24:59] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 09:24:59] ENSイベントを監視中 (OrderID: 5358699781, UIC: 42, タイプ: ['order_fill'])...
ENS再接続開始: force_new_context=False, contextId=ctx-7917082900-nj5pulq9, messageid=62
[2026-01-09 09:25:00] アクセストークンを更新しています...
[2026-01-09 09:25:00] エントリー 取引ID 51 (USD/JPY Sell): 目標時刻=10:07:00, ゆらぎ=0.77秒, 最終実行時刻=10:06:59
[2026-01-09 09:25:00] 次のアクション 'PING_60S' まで 2458.53 秒待機します...
[2026-01-09 09:25:02] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7917082900-nj5pulq9&authorization=***&messageid=62
ENS monitor task cancelled
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7917082900-nj5pulq9, messageid=0
[2026-01-09 09:25:05] アクセストークンを更新しています...
[2026-01-09 09:25:06] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 09:25:06] ENSサブスクリプションを作成中...
[2026-01-09 09:25:06] ストリーミング用ContextId生成: ctx-7918306216-rvs02rd4
[2026-01-09 09:25:06] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7918306216-rvs02rd4&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7918306216-rvs02rd4&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 09:27:59] タイムアウト(180秒)により、OrderID 5358699781 / UIC 42 の ['order_fill'] イベントを確認できませんでした。
[2026-01-09 09:27:59] ENSでの決済確認がタイムアウトしました。フォールバック機能（監査API）で確認します。
[2026-01-09 09:27:59] フォールバック実行: 監査APIで注文 5358699781 の状態を確認します。
[2026-01-09 09:28:00] 監査APIから応答あり: Status=FinalFill
[2026-01-09 09:28:00] ★ 監査APIにより約定を確認: 価格=156.925
[2026-01-09 09:28:00] イベント 'order_fill_fallback' により決済を確認しました。
[2026-01-09 09:28:00] ポジション情報を検索中 (UIC: 42)...
[2026-01-09 09:28:00] ClosedPositionsに該当がなくても保有ポジションなしと判定: UIC=42
[2026-01-09 09:28:01] Discord通知を送信しました。ステータス: 204
[2026-01-09 09:28:01] 取引ステータスを trade_status.json に保存しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 09:41:10] アクセストークンを更新しています...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 09:41:11] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 09:44:51, last_message_id=58, last_ping_ok_at=2026-01-09 09:45:02, last_ping_rtt_ms=0.4
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=False, contextId=ctx-7918306216-rvs02rd4, messageid=58
[2026-01-09 09:45:12] アクセストークンを更新しています...
ENS ping失敗: no close frame received or sent (ConnectionClosedError)
[2026-01-09 09:45:13] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7918306216-rvs02rd4&authorization=***&messageid=58
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7918306216-rvs02rd4, messageid=0
[2026-01-09 09:45:15] アクセストークンを更新しています...
[2026-01-09 09:45:16] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 09:45:16] ENSサブスクリプションを作成中...
[2026-01-09 09:45:16] ストリーミング用ContextId生成: ctx-7919516986-pamiz361
[2026-01-09 09:45:18] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7919516986-pamiz361&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7919516986-pamiz361&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 09:59:11] アクセストークンを更新しています...
[2026-01-09 09:59:13] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 10:05:05, last_message_id=58, last_ping_ok_at=2026-01-09 10:05:15, last_ping_rtt_ms=0.2
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS ping失敗: no close frame received or sent (ConnectionClosedError)
ENS再接続開始: force_new_context=False, contextId=ctx-7919516986-pamiz361, messageid=58
[2026-01-09 10:05:26] アクセストークンを更新しています...
[2026-01-09 10:05:27] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7919516986-pamiz361&authorization=***&messageid=58
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7919516986-pamiz361, messageid=0
[2026-01-09 10:05:29] アクセストークンを更新しています...
[2026-01-09 10:05:31] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 10:05:31] ENSサブスクリプションを作成中...
[2026-01-09 10:05:31] ストリーミング用ContextId生成: ctx-7920731504-mob03uxs
[2026-01-09 10:05:32] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7920731504-mob03uxs&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7920731504-mob03uxs&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 10:05:59] 接続の事前確認 (PING_60S) を行います...
[2026-01-09 10:05:59] 現在のアクセストークンを検証しています...
[2026-01-09 10:05:59] トークン検証成功。
[2026-01-09 10:05:59] 事前確認 (PING_60S) 成功。
[2026-01-09 10:05:59] 次のアクション 'PING_30S' まで 29.70 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 10:06:29] 接続の事前確認 (PING_30S) を行います...
[2026-01-09 10:06:29] 現在のアクセストークンを検証しています...
[2026-01-09 10:06:29] トークン検証成功。
[2026-01-09 10:06:29] 事前確認 (PING_30S) 成功。
[2026-01-09 10:06:29] 次のアクション 'FINAL_ACTION' まで 29.71 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 10:06:59] エントリー 取引ID 51 (USD/JPY Sell) の実行時刻になりました。
[2026-01-09 10:06:59] --- 取引ID 51 (USD/JPY Sell) のエントリー処理開始 ---
[2026-01-09 10:06:59] 価格情報を取得します。UICs: 42, AssetType: FxSpot, FieldGroups: Quote,DisplayAndFormat,PriceInfo
[2026-01-09 10:06:59] エントリー処理開始 (UIC: 42, Side: Sell, Amount: 50000.0)...
[2026-01-09 10:06:59] UIC 42 の既存取引（ポジション/Working注文）を確認中...
[2026-01-09 10:07:00] UIC 42 の既存取引は見つかりませんでした。
[2026-01-09 10:07:00] 既存取引がないため、新規注文を発注します...
[2026-01-09 10:07:00] 価格情報を取得します。UICs: 42, AssetType: FxSpot, FieldGroups: Quote,DisplayAndFormat
[2026-01-09 10:07:00] 関連注文を確認: 1件
[2026-01-09 10:07:00] ✅ SL注文が成立: OrderId=5358701187, Type=None
[2026-01-09 10:07:00]   関連注文1: OrderId=5358701187, Status=None, Type=None
[2026-01-09 10:07:00] Market + SL 注文送信完了: OrderId=5358701186
[2026-01-09 10:07:00] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 10:07:00] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 10:07:00] ENSイベントを監視中 (OrderID: 5358701186, UIC: 42, タイプ: ['order_fill'])...
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T01:07:00.601277Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Sell', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': 'bca4da0a-54ca-474c-8bce-596e06da7eb9', 'Duration': {'DurationType': 'DayOrder'}, 'ExternalReference': '20260109_trade_51_entry_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358701186', 'OrderRelation': 'IfDoneMaster', 'OrderType': 'Market', 'RelatedOrderId': ['5358701187'], 'RelatedOrderIds': ['5358701187'], 'SequenceId': '2903081571', 'Status': 'Placed', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T01:07:00.601277Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Buy', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': 'bca4da0a-54ca-474c-8bce-596e06da7eb9', 'Duration': {'DurationType': 'GoodTillCancel'}, 'ExternalReference': '20260109_trade_51_entry_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358701187', 'OrderRelation': 'IfDoneSlave', 'OrderType': 'Stop', 'Price': 159.08, 'RelatedOrderId': ['5358701186'], 'RelatedOrderIds': ['5358701186'], 'SequenceId': '2903081572', 'Status': 'Placed', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T01:07:00.602279Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'AveragePrice': 157.08, 'BuySell': 'Sell', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': 'bca4da0a-54ca-474c-8bce-596e06da7eb9', 'Duration': {'DurationType': 'DayOrder'}, 'ExecutionPrice': 157.08, 'ExternalReference': '20260109_trade_51_entry_v1', 'FillAmount': 50000.0, 'FilledAmount': 50000.0, 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358701186', 'OrderRelation': 'IfDoneMaster', 'OrderType': 'Market', 'PositionId': '7426141452', 'RelatedOrderId': ['5358701187'], 'RelatedOrderIds': ['5358701187'], 'SequenceId': '2903081574', 'Status': 'FinalFill', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42, 'ValueDate': '2026-01-14', 'Venue': 'XXXX'}
✨ ENSから注文完全約定イベント: OrderID=5358701186, Price=157.08
[2026-01-09 10:07:01] ★ ENSで期待するイベント(order_fill)を受信しました: {'type': 'order_fill', 'order_id': '5358701186', 'execution_price': Decimal('157.08'), 'execution_time': '2026-01-09T01:07:00.602279Z', 'filled_amount': Decimal('50000.0'), 'amount': Decimal('50000.0'), 'status': 'filled', 'uic': 42, 'position_id': '7426141452'}
[2026-01-09 10:07:01] ✅ エントリー成功: 取引ID 51 (USD/JPY Sell)
[2026-01-09 10:07:02] Discord通知を送信しました。ステータス: 204
[2026-01-09 10:07:02] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 10:07:02] 決済 取引ID 51 (USD/JPY Sell): 目標時刻=10:16:00, ゆらぎ=1.23秒, 最終実行時刻=10:15:58
[2026-01-09 10:07:02] 次のアクション 'PING_60S' まで 476.21 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 10:14:58] 接続の事前確認 (PING_60S) を行います...
[2026-01-09 10:14:58] 現在のアクセストークンを検証しています...
[2026-01-09 10:14:59] トークン検証成功。
[2026-01-09 10:14:59] 事前確認 (PING_60S) 成功。
[2026-01-09 10:14:59] 次のアクション 'PING_30S' まで 29.70 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 10:15:28] 接続の事前確認 (PING_30S) を行います...
[2026-01-09 10:15:28] 現在のアクセストークンを検証しています...
[2026-01-09 10:15:29] トークン検証成功。
[2026-01-09 10:15:29] 事前確認 (PING_30S) 成功。
[2026-01-09 10:15:29] 次のアクション 'FINAL_ACTION' まで 29.72 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 10:15:58] 決済 取引ID 51 (USD/JPY Sell) の実行時刻になりました。
[2026-01-09 10:15:58] --- 取引ID 51 (USD/JPY Sell) の決済処理開始 ---
[2026-01-09 10:15:58] ポジション情報を検索中 (UIC: 42)...
[2026-01-09 10:15:59] UIC 42 の最新ポジションを発見しました。
[2026-01-09 10:15:59] UIC 42 のSL候補注文はありません。追跡IDがないため全Working注文をキャンセルします。
[2026-01-09 10:15:59] 注文キャンセルを実行しました: OrderId=5358701187
[2026-01-09 10:15:59] ポジション 7426141452 (USD/JPY) の決済処理開始...
[2026-01-09 10:15:59] ポジション情報を検索中 (UIC: 42)...
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T01:15:59.532681Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Buy', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': 'bca4da0a-54ca-474c-8bce-596e06da7eb9', 'Duration': {'DurationType': 'GoodTillCancel'}, 'ExternalReference': '20260109_trade_51_entry_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358701187', 'OrderRelation': 'StandAlone', 'OrderType': 'Stop', 'Price': 159.08, 'SequenceId': '2903083848', 'Status': 'Cancelled', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
🧹 SL注文がキャンセル: OrderID=5358701187, Status=cancelled
ENSから注文ステータス変更イベント: OrderID=5358701187, Status=cancelled
[2026-01-09 10:15:59] UIC 42 の最新ポジションを発見しました。
[2026-01-09 10:15:59] 決済注文データ: Buy 50000.0 units of UIC 42
[2026-01-09 10:16:00] USD/JPY の決済注文が受付されました。OrderId: 5358701226
[2026-01-09 10:16:00] 決済注文が受付されました。OrderID: 5358701226
[2026-01-09 10:16:00] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 10:16:00] ENSイベントを監視中 (OrderID: 5358701226, UIC: 42, タイプ: ['order_fill'])...
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T01:16:00.149300Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Buy', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': '24a92acd-8216-4fcc-9868-a7285358b305', 'Duration': {'DurationType': 'DayOrder'}, 'ExternalReference': '20260109_trade_51_exit_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358701226', 'OrderRelation': 'StandAlone', 'OrderType': 'Market', 'SequenceId': '2903083854', 'Status': 'Placed', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T01:16:00.150301Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'AveragePrice': 157.033, 'BuySell': 'Buy', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': '24a92acd-8216-4fcc-9868-a7285358b305', 'Duration': {'DurationType': 'DayOrder'}, 'ExecutionPrice': 157.033, 'ExternalReference': '20260109_trade_51_exit_v1', 'FillAmount': 50000.0, 'FilledAmount': 50000.0, 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358701226', 'OrderRelation': 'StandAlone', 'OrderType': 'Market', 'PositionId': '7426143300', 'SequenceId': '2903083856', 'Status': 'FinalFill', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42, 'ValueDate': '2026-01-14', 'Venue': 'XXXX'}
✨ ENSから注文完全約定イベント: OrderID=5358701226, Price=157.033
[2026-01-09 10:16:00] ★ ENSで期待するイベント(order_fill)を受信しました: {'type': 'order_fill', 'order_id': '5358701226', 'execution_price': Decimal('157.033'), 'execution_time': '2026-01-09T01:16:00.150301Z', 'filled_amount': Decimal('50000.0'), 'amount': Decimal('50000.0'), 'status': 'filled', 'uic': 42, 'position_id': '7426143300'}
[2026-01-09 10:16:00] イベント 'order_fill' により決済を確認しました。
[2026-01-09 10:16:00] ポジション情報を検索中 (UIC: 42)...
[2026-01-09 10:16:00] ClosedPositionsに該当がなくても保有ポジションなしと判定: UIC=42
[2026-01-09 10:16:02] Discord通知を送信しました。ステータス: 204
[2026-01-09 10:16:02] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 10:16:02] エントリー 取引ID 52 (USD/JPY Sell): 目標時刻=11:00:00, ゆらぎ=1.04秒, 最終実行時刻=10:59:58
[2026-01-09 10:16:02] 次のアクション 'PING_60S' まで 2576.70 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 10:17:13] アクセストークンを更新しています...
[2026-01-09 10:17:14] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 10:25:25, last_message_id=65, last_ping_ok_at=2026-01-09 10:25:39, last_ping_rtt_ms=0.3
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=False, contextId=ctx-7920731504-mob03uxs, messageid=65
[2026-01-09 10:25:46] アクセストークンを更新しています...
[2026-01-09 10:25:47] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7920731504-mob03uxs&authorization=***&messageid=65
ENS monitor task cancelled
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7920731504-mob03uxs, messageid=0
[2026-01-09 10:25:50] アクセストークンを更新しています...
[2026-01-09 10:25:51] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 10:25:51] ENSサブスクリプションを作成中...
[2026-01-09 10:25:51] ストリーミング用ContextId生成: ctx-7921951190-fqmm5j27
[2026-01-09 10:25:52] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7921951190-fqmm5j27&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7921951190-fqmm5j27&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 10:35:14] アクセストークンを更新しています...
[2026-01-09 10:35:15] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 10:45:39, last_message_id=58, last_ping_ok_at=2026-01-09 10:45:59, last_ping_rtt_ms=0.4
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=False, contextId=ctx-7921951190-fqmm5j27, messageid=58
[2026-01-09 10:46:00] アクセストークンを更新しています...
[2026-01-09 10:46:01] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7921951190-fqmm5j27&authorization=***&messageid=58
ENS monitor task cancelled
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS接続監視モニターを開始します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7921951190-fqmm5j27, messageid=0
[2026-01-09 10:46:03] アクセストークンを更新しています...
[2026-01-09 10:46:04] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 10:46:04] ENSサブスクリプションを作成中...
[2026-01-09 10:46:04] ストリーミング用ContextId生成: ctx-7923164661-y3hgd17l
[2026-01-09 10:46:06] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7923164661-y3hgd17l&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7923164661-y3hgd17l&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 10:53:15] アクセストークンを更新しています...
[2026-01-09 10:53:17] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 10:58:58] 接続の事前確認 (PING_60S) を行います...
[2026-01-09 10:58:58] 現在のアクセストークンを検証しています...
[2026-01-09 10:59:00] トークン検証成功。
[2026-01-09 10:59:00] 事前確認 (PING_60S) 成功。
[2026-01-09 10:59:00] 次のアクション 'PING_30S' まで 28.56 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 10:59:28] 接続の事前確認 (PING_30S) を行います...
[2026-01-09 10:59:28] 現在のアクセストークンを検証しています...
[2026-01-09 10:59:29] トークン検証成功。
[2026-01-09 10:59:29] 事前確認 (PING_30S) 成功。
[2026-01-09 10:59:29] 次のアクション 'FINAL_ACTION' まで 29.70 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 10:59:58] エントリー 取引ID 52 (USD/JPY Sell) の実行時刻になりました。
[2026-01-09 10:59:58] --- 取引ID 52 (USD/JPY Sell) のエントリー処理開始 ---
[2026-01-09 10:59:58] 価格情報を取得します。UICs: 42, AssetType: FxSpot, FieldGroups: Quote,DisplayAndFormat,PriceInfo
[2026-01-09 10:59:59] エントリー処理開始 (UIC: 42, Side: Sell, Amount: 50000.0)...
[2026-01-09 10:59:59] UIC 42 の既存取引（ポジション/Working注文）を確認中...
[2026-01-09 10:59:59] UIC 42 の既存取引は見つかりませんでした。
[2026-01-09 10:59:59] 既存取引がないため、新規注文を発注します...
[2026-01-09 10:59:59] 価格情報を取得します。UICs: 42, AssetType: FxSpot, FieldGroups: Quote,DisplayAndFormat
[2026-01-09 11:00:00] 関連注文を確認: 1件
[2026-01-09 11:00:00] ✅ SL注文が成立: OrderId=5358703819, Type=None
[2026-01-09 11:00:00]   関連注文1: OrderId=5358703819, Status=None, Type=None
[2026-01-09 11:00:00] Market + SL 注文送信完了: OrderId=5358703818
[2026-01-09 11:00:00] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 11:00:00] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 11:00:00] ENSイベントを監視中 (OrderID: 5358703818, UIC: 42, タイプ: ['order_fill'])...
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T02:00:00.375437Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Sell', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': 'f869b0bc-92b6-413d-9425-b17479fdf358', 'Duration': {'DurationType': 'DayOrder'}, 'ExternalReference': '20260109_trade_52_entry_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358703818', 'OrderRelation': 'IfDoneMaster', 'OrderType': 'Market', 'RelatedOrderId': ['5358703819'], 'RelatedOrderIds': ['5358703819'], 'SequenceId': '2903099544', 'Status': 'Placed', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T02:00:00.375437Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Buy', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': 'f869b0bc-92b6-413d-9425-b17479fdf358', 'Duration': {'DurationType': 'GoodTillCancel'}, 'ExternalReference': '20260109_trade_52_entry_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358703819', 'OrderRelation': 'IfDoneSlave', 'OrderType': 'Stop', 'Price': 159.16, 'RelatedOrderId': ['5358703818'], 'RelatedOrderIds': ['5358703818'], 'SequenceId': '2903099545', 'Status': 'Placed', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T02:00:00.376436Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'AveragePrice': 157.158, 'BuySell': 'Sell', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': 'f869b0bc-92b6-413d-9425-b17479fdf358', 'Duration': {'DurationType': 'DayOrder'}, 'ExecutionPrice': 157.158, 'ExternalReference': '20260109_trade_52_entry_v1', 'FillAmount': 50000.0, 'FilledAmount': 50000.0, 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358703818', 'OrderRelation': 'IfDoneMaster', 'OrderType': 'Market', 'PositionId': '7426152295', 'RelatedOrderId': ['5358703819'], 'RelatedOrderIds': ['5358703819'], 'SequenceId': '2903099547', 'Status': 'FinalFill', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42, 'ValueDate': '2026-01-14', 'Venue': 'XXXX'}
✨ ENSから注文完全約定イベント: OrderID=5358703818, Price=157.158
[2026-01-09 11:00:00] ★ ENSで期待するイベント(order_fill)を受信しました: {'type': 'order_fill', 'order_id': '5358703818', 'execution_price': Decimal('157.158'), 'execution_time': '2026-01-09T02:00:00.376436Z', 'filled_amount': Decimal('50000.0'), 'amount': Decimal('50000.0'), 'status': 'filled', 'uic': 42, 'position_id': '7426152295'}
[2026-01-09 11:00:00] ✅ エントリー成功: 取引ID 52 (USD/JPY Sell)
[2026-01-09 11:00:02] Discord通知を送信しました。ステータス: 204
[2026-01-09 11:00:02] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 11:00:02] 決済 取引ID 52 (USD/JPY Sell): 目標時刻=11:03:00, ゆらぎ=0.54秒, 最終実行時刻=11:02:59
[2026-01-09 11:00:02] 次のアクション 'PING_60S' まで 117.33 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 11:01:59] 接続の事前確認 (PING_60S) を行います...
[2026-01-09 11:01:59] 現在のアクセストークンを検証しています...
[2026-01-09 11:01:59] トークン検証成功。
[2026-01-09 11:01:59] 事前確認 (PING_60S) 成功。
[2026-01-09 11:01:59] 次のアクション 'PING_30S' まで 29.71 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 11:02:29] 接続の事前確認 (PING_30S) を行います...
[2026-01-09 11:02:29] 現在のアクセストークンを検証しています...
[2026-01-09 11:02:29] トークン検証成功。
[2026-01-09 11:02:29] 事前確認 (PING_30S) 成功。
[2026-01-09 11:02:29] 次のアクション 'FINAL_ACTION' まで 29.72 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 11:02:59] 決済 取引ID 52 (USD/JPY Sell) の実行時刻になりました。
[2026-01-09 11:02:59] --- 取引ID 52 (USD/JPY Sell) の決済処理開始 ---
[2026-01-09 11:02:59] ポジション情報を検索中 (UIC: 42)...
[2026-01-09 11:02:59] UIC 42 の最新ポジションを発見しました。
[2026-01-09 11:03:00] UIC 42 のSL候補注文はありません。追跡IDがないため全Working注文をキャンセルします。
[2026-01-09 11:03:00] 注文キャンセルを実行しました: OrderId=5358703819
[2026-01-09 11:03:00] ポジション 7426152295 (USD/JPY) の決済処理開始...
[2026-01-09 11:03:00] ポジション情報を検索中 (UIC: 42)...
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T02:03:00.238933Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Buy', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': 'f869b0bc-92b6-413d-9425-b17479fdf358', 'Duration': {'DurationType': 'GoodTillCancel'}, 'ExternalReference': '20260109_trade_52_entry_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358703819', 'OrderRelation': 'StandAlone', 'OrderType': 'Stop', 'Price': 159.16, 'SequenceId': '2903124165', 'Status': 'Cancelled', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
🧹 SL注文がキャンセル: OrderID=5358703819, Status=cancelled
ENSから注文ステータス変更イベント: OrderID=5358703819, Status=cancelled
[2026-01-09 11:03:00] UIC 42 の最新ポジションを発見しました。
[2026-01-09 11:03:00] 決済注文データ: Buy 50000.0 units of UIC 42
[2026-01-09 11:03:00] USD/JPY の決済注文が受付されました。OrderId: 5358703828
[2026-01-09 11:03:00] 決済注文が受付されました。OrderID: 5358703828
[2026-01-09 11:03:00] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 11:03:00] ENSイベントを監視中 (OrderID: 5358703828, UIC: 42, タイプ: ['order_fill'])...
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T02:03:00.824623Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Buy', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': 'ecfcfc40-6585-42ac-9d29-2a71b5e983e8', 'Duration': {'DurationType': 'DayOrder'}, 'ExternalReference': '20260109_trade_52_exit_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358703828', 'OrderRelation': 'StandAlone', 'OrderType': 'Market', 'SequenceId': '2903127293', 'Status': 'Placed', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T02:03:00.824623Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'AveragePrice': 157.156, 'BuySell': 'Buy', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': 'ecfcfc40-6585-42ac-9d29-2a71b5e983e8', 'Duration': {'DurationType': 'DayOrder'}, 'ExecutionPrice': 157.156, 'ExternalReference': '20260109_trade_52_exit_v1', 'FillAmount': 50000.0, 'FilledAmount': 50000.0, 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358703828', 'OrderRelation': 'StandAlone', 'OrderType': 'Market', 'PositionId': '7426153448', 'SequenceId': '2903127359', 'Status': 'FinalFill', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42, 'ValueDate': '2026-01-14', 'Venue': 'XXXX'}
✨ ENSから注文完全約定イベント: OrderID=5358703828, Price=157.156
[2026-01-09 11:03:01] ★ ENSで期待するイベント(order_fill)を受信しました: {'type': 'order_fill', 'order_id': '5358703828', 'execution_price': Decimal('157.156'), 'execution_time': '2026-01-09T02:03:00.824623Z', 'filled_amount': Decimal('50000.0'), 'amount': Decimal('50000.0'), 'status': 'filled', 'uic': 42, 'position_id': '7426153448'}
[2026-01-09 11:03:01] イベント 'order_fill' により決済を確認しました。
[2026-01-09 11:03:01] ポジション情報を検索中 (UIC: 42)...
[2026-01-09 11:03:01] ClosedPositionsに該当がなくても保有ポジションなしと判定: UIC=42
[2026-01-09 11:03:02] Discord通知を送信しました。ステータス: 204
[2026-01-09 11:03:02] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 11:03:02] エントリー 取引ID 53 (USD/JPY Sell): 目標時刻=11:58:00, ゆらぎ=2.03秒, 最終実行時刻=11:57:57
[2026-01-09 11:03:02] 次のアクション 'PING_60S' まで 3235.02 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 11:06:02, last_message_id=65, last_ping_ok_at=2026-01-09 11:06:13, last_ping_rtt_ms=0.3
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS ping失敗: no close frame received or sent (ConnectionClosedError)
ENS再接続開始: force_new_context=False, contextId=ctx-7923164661-y3hgd17l, messageid=65
[2026-01-09 11:06:23] アクセストークンを更新しています...
[2026-01-09 11:06:25] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7923164661-y3hgd17l&authorization=***&messageid=65
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7923164661-y3hgd17l, messageid=0
[2026-01-09 11:06:27] アクセストークンを更新しています...
[2026-01-09 11:06:29] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 11:06:29] ENSサブスクリプションを作成中...
[2026-01-09 11:06:29] ストリーミング用ContextId生成: ctx-7924389017-zfnbku28
[2026-01-09 11:06:29] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7924389017-zfnbku28&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7924389017-zfnbku28&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENSからポジションクローズイベントを受信しました: PositionID=7424804429, Event=deleted
[2026-01-09 11:07:17] UIC 42 のキャンセル対象注文はありません。
ENSからポジションクローズイベントを受信しました: PositionID=7424363183, Event=deleted
[2026-01-09 11:07:17] UIC 42 のキャンセル対象注文はありません。
ENSからポジションクローズイベントを受信しました: PositionID=7424438422, Event=deleted
[2026-01-09 11:07:18] UIC 42 のキャンセル対象注文はありません。
ENSからポジションクローズイベントを受信しました: PositionID=7424798775, Event=deleted
[2026-01-09 11:07:18] UIC 42 のキャンセル対象注文はありません。
ENSからポジションクローズイベントを受信しました: PositionID=7424839844, Event=deleted
[2026-01-09 11:07:18] UIC 42 のキャンセル対象注文はありません。
ENSからポジションクローズイベントを受信しました: PositionID=7424676067, Event=deleted
[2026-01-09 11:07:19] UIC 42 のキャンセル対象注文はありません。
ENSからポジションクローズイベントを受信しました: PositionID=7424363187, Event=deleted
[2026-01-09 11:07:19] UIC 42 のキャンセル対象注文はありません。
ENSからポジションクローズイベントを受信しました: PositionID=7424412677, Event=deleted
[2026-01-09 11:07:19] UIC 42 のキャンセル対象注文はありません。
ENSからポジションクローズイベントを受信しました: PositionID=7424363155, Event=deleted
[2026-01-09 11:07:19] UIC 42 のキャンセル対象注文はありません。
ENSからポジションクローズイベントを受信しました: PositionID=7424878044, Event=deleted
[2026-01-09 11:07:20] UIC 42 のキャンセル対象注文はありません。
ENSからポジションクローズイベントを受信しました: PositionID=7424438440, Event=deleted
[2026-01-09 11:07:20] UIC 42 のキャンセル対象注文はありません。
ENSからポジションクローズイベントを受信しました: PositionID=7424379151, Event=deleted
[2026-01-09 11:07:20] UIC 42 のキャンセル対象注文はありません。
ENSからポジションクローズイベントを受信しました: PositionID=7424527283, Event=deleted
[2026-01-09 11:07:20] UIC 42 のキャンセル対象注文はありません。
ENSからポジションクローズイベントを受信しました: PositionID=7424872744, Event=deleted
[2026-01-09 11:07:21] UIC 42 のキャンセル対象注文はありません。
ENSからポジションクローズイベントを受信しました: PositionID=7424863200, Event=deleted
[2026-01-09 11:07:21] UIC 42 のキャンセル対象注文はありません。
ENSからポジションクローズイベントを受信しました: PositionID=7424407525, Event=deleted
[2026-01-09 11:07:21] UIC 42 のキャンセル対象注文はありません。
ENSからポジションクローズイベントを受信しました: PositionID=7424798797, Event=deleted
[2026-01-09 11:07:21] UIC 42 のキャンセル対象注文はありません。
ENSからポジションクローズイベントを受信しました: PositionID=7424369288, Event=deleted
[2026-01-09 11:07:22] UIC 42 のキャンセル対象注文はありません。
ENSからポジションクローズイベントを受信しました: PositionID=7424676109, Event=deleted
[2026-01-09 11:07:22] UIC 42 のキャンセル対象注文はありません。
ENSからポジションクローズイベントを受信しました: PositionID=7424872772, Event=deleted
[2026-01-09 11:07:22] UIC 42 のキャンセル対象注文はありません。
ENSからポジションクローズイベントを受信しました: PositionID=7424379183, Event=deleted
[2026-01-09 11:07:23] UIC 42 のキャンセル対象注文はありません。
ENSからポジションクローズイベントを受信しました: PositionID=7424517868, Event=deleted
[2026-01-09 11:07:23] UIC 42 のキャンセル対象注文はありません。
ENSからポジションクローズイベントを受信しました: PositionID=7424784020, Event=deleted
[2026-01-09 11:07:23] UIC 42 のキャンセル対象注文はありません。
ENSからポジションクローズイベントを受信しました: PositionID=7424845852, Event=deleted
[2026-01-09 11:07:23] UIC 42 のキャンセル対象注文はありません。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 11:11:17] アクセストークンを更新しています...
[2026-01-09 11:11:18] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 11:26:22, last_message_id=82, last_ping_ok_at=2026-01-09 11:26:35, last_ping_rtt_ms=0.3
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=False, contextId=ctx-7924389017-zfnbku28, messageid=82
[2026-01-09 11:26:44] アクセストークンを更新しています...
[2026-01-09 11:26:45] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7924389017-zfnbku28&authorization=***&messageid=82
ENS monitor task cancelled
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS接続監視モニターを開始します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7924389017-zfnbku28, messageid=0
[2026-01-09 11:26:47] アクセストークンを更新しています...
[2026-01-09 11:26:48] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 11:26:48] ENSサブスクリプションを作成中...
[2026-01-09 11:26:48] ストリーミング用ContextId生成: ctx-7925608899-zhrqvpsb
[2026-01-09 11:26:50] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7925608899-zhrqvpsb&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7925608899-zhrqvpsb&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 11:29:18] アクセストークンを更新しています...
[2026-01-09 11:29:19] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 11:46:36, last_message_id=58, last_ping_ok_at=2026-01-09 11:46:56, last_ping_rtt_ms=0.5
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=False, contextId=ctx-7925608899-zhrqvpsb, messageid=58
[2026-01-09 11:46:57] アクセストークンを更新しています...
[2026-01-09 11:46:59] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7925608899-zhrqvpsb&authorization=***&messageid=58
ENS monitor task cancelled
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS接続監視モニターを開始します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7925608899-zhrqvpsb, messageid=0
[2026-01-09 11:47:01] アクセストークンを更新しています...
[2026-01-09 11:47:02] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 11:47:02] ENSサブスクリプションを作成中...
[2026-01-09 11:47:02] ストリーミング用ContextId生成: ctx-7926822515-pcptgcgi
[2026-01-09 11:47:03] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7926822515-pcptgcgi&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7926822515-pcptgcgi&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
[2026-01-09 11:47:19] アクセストークンを更新しています...
[2026-01-09 11:47:21] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 11:56:57] 接続の事前確認 (PING_60S) を行います...
[2026-01-09 11:56:57] 現在のアクセストークンを検証しています...
[2026-01-09 11:56:59] トークン検証成功。
[2026-01-09 11:56:59] 事前確認 (PING_60S) 成功。
[2026-01-09 11:56:59] 次のアクション 'PING_30S' まで 28.54 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 11:57:27] 接続の事前確認 (PING_30S) を行います...
[2026-01-09 11:57:27] 現在のアクセストークンを検証しています...
[2026-01-09 11:57:28] トークン検証成功。
[2026-01-09 11:57:28] 事前確認 (PING_30S) 成功。
[2026-01-09 11:57:28] 次のアクション 'FINAL_ACTION' まで 29.71 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 11:57:57] エントリー 取引ID 53 (USD/JPY Sell) の実行時刻になりました。
[2026-01-09 11:57:57] --- 取引ID 53 (USD/JPY Sell) のエントリー処理開始 ---
[2026-01-09 11:57:57] 価格情報を取得します。UICs: 42, AssetType: FxSpot, FieldGroups: Quote,DisplayAndFormat,PriceInfo
[2026-01-09 11:57:58] エントリー処理開始 (UIC: 42, Side: Sell, Amount: 50000.0)...
[2026-01-09 11:57:58] UIC 42 の既存取引（ポジション/Working注文）を確認中...
[2026-01-09 11:57:58] UIC 42 の既存取引は見つかりませんでした。
[2026-01-09 11:57:58] 既存取引がないため、新規注文を発注します...
[2026-01-09 11:57:58] 価格情報を取得します。UICs: 42, AssetType: FxSpot, FieldGroups: Quote,DisplayAndFormat
[2026-01-09 11:57:59] 関連注文を確認: 1件
[2026-01-09 11:57:59] ✅ SL注文が成立: OrderId=5358707380, Type=None
[2026-01-09 11:57:59]   関連注文1: OrderId=5358707380, Status=None, Type=None
[2026-01-09 11:57:59] Market + SL 注文送信完了: OrderId=5358707379
[2026-01-09 11:57:59] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 11:57:59] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 11:57:59] ENSイベントを監視中 (OrderID: 5358707379, UIC: 42, タイプ: ['order_fill'])...
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T02:57:59.333339Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Sell', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': '1a1427e9-3e17-414d-a07e-b0ff31c95d6f', 'Duration': {'DurationType': 'DayOrder'}, 'ExternalReference': '20260109_trade_53_entry_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358707379', 'OrderRelation': 'IfDoneMaster', 'OrderType': 'Market', 'RelatedOrderId': ['5358707380'], 'RelatedOrderIds': ['5358707380'], 'SequenceId': '2903581193', 'Status': 'Placed', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T02:57:59.333339Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Buy', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': '1a1427e9-3e17-414d-a07e-b0ff31c95d6f', 'Duration': {'DurationType': 'GoodTillCancel'}, 'ExternalReference': '20260109_trade_53_entry_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358707380', 'OrderRelation': 'IfDoneSlave', 'OrderType': 'Stop', 'Price': 159.2, 'RelatedOrderId': ['5358707379'], 'RelatedOrderIds': ['5358707379'], 'SequenceId': '2903581194', 'Status': 'Placed', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T02:57:59.334339Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'AveragePrice': 157.195, 'BuySell': 'Sell', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': '1a1427e9-3e17-414d-a07e-b0ff31c95d6f', 'Duration': {'DurationType': 'DayOrder'}, 'ExecutionPrice': 157.195, 'ExternalReference': '20260109_trade_53_entry_v1', 'FillAmount': 50000.0, 'FilledAmount': 50000.0, 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358707379', 'OrderRelation': 'IfDoneMaster', 'OrderType': 'Market', 'PositionId': '7426205778', 'RelatedOrderId': ['5358707380'], 'RelatedOrderIds': ['5358707380'], 'SequenceId': '2903581196', 'Status': 'FinalFill', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42, 'ValueDate': '2026-01-14', 'Venue': 'XXXX'}
✨ ENSから注文完全約定イベント: OrderID=5358707379, Price=157.195
[2026-01-09 11:57:59] ★ ENSで期待するイベント(order_fill)を受信しました: {'type': 'order_fill', 'order_id': '5358707379', 'execution_price': Decimal('157.195'), 'execution_time': '2026-01-09T02:57:59.334339Z', 'filled_amount': Decimal('50000.0'), 'amount': Decimal('50000.0'), 'status': 'filled', 'uic': 42, 'position_id': '7426205778'}
[2026-01-09 11:57:59] ✅ エントリー成功: 取引ID 53 (USD/JPY Sell)
[2026-01-09 11:58:01] Discord通知を送信しました。ステータス: 204
[2026-01-09 11:58:01] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 11:58:01] 決済 取引ID 53 (USD/JPY Sell): 目標時刻=12:10:00, ゆらぎ=1.01秒, 最終実行時刻=12:09:58
[2026-01-09 11:58:01] 次のアクション 'PING_60S' まで 657.61 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 12:05:21] アクセストークンを更新しています...
[2026-01-09 12:05:22] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 12:06:43, last_message_id=61, last_ping_ok_at=2026-01-09 12:07:01, last_ping_rtt_ms=0.3
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=False, contextId=ctx-7926822515-pcptgcgi, messageid=61
[2026-01-09 12:07:04] アクセストークンを更新しています...
[2026-01-09 12:07:05] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7926822515-pcptgcgi&authorization=***&messageid=61
ENS monitor task cancelled
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7926822515-pcptgcgi, messageid=0
[2026-01-09 12:07:08] アクセストークンを更新しています...
[2026-01-09 12:07:09] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 12:07:09] ENSサブスクリプションを作成中...
[2026-01-09 12:07:09] ストリーミング用ContextId生成: ctx-7928029258-pkcbwtwt
[2026-01-09 12:07:10] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7928029258-pkcbwtwt&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7928029258-pkcbwtwt&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 12:08:58] 接続の事前確認 (PING_60S) を行います...
[2026-01-09 12:08:58] 現在のアクセストークンを検証しています...
[2026-01-09 12:08:59] トークン検証成功。
[2026-01-09 12:08:59] 事前確認 (PING_60S) 成功。
[2026-01-09 12:08:59] 次のアクション 'PING_30S' まで 29.72 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 12:09:29] 接続の事前確認 (PING_30S) を行います...
[2026-01-09 12:09:29] 現在のアクセストークンを検証しています...
[2026-01-09 12:09:29] トークン検証成功。
[2026-01-09 12:09:29] 事前確認 (PING_30S) 成功。
[2026-01-09 12:09:29] 次のアクション 'FINAL_ACTION' まで 29.70 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 12:09:58] 決済 取引ID 53 (USD/JPY Sell) の実行時刻になりました。
[2026-01-09 12:09:58] --- 取引ID 53 (USD/JPY Sell) の決済処理開始 ---
[2026-01-09 12:09:58] ポジション情報を検索中 (UIC: 42)...
[2026-01-09 12:09:59] UIC 42 の最新ポジションを発見しました。
[2026-01-09 12:09:59] UIC 42 のSL候補注文はありません。追跡IDがないため全Working注文をキャンセルします。
[2026-01-09 12:09:59] 注文キャンセルを実行しました: OrderId=5358707380
[2026-01-09 12:09:59] ポジション 7426205778 (USD/JPY) の決済処理開始...
[2026-01-09 12:09:59] ポジション情報を検索中 (UIC: 42)...
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T03:09:59.822193Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Buy', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': '1a1427e9-3e17-414d-a07e-b0ff31c95d6f', 'Duration': {'DurationType': 'GoodTillCancel'}, 'ExternalReference': '20260109_trade_53_entry_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358707380', 'OrderRelation': 'StandAlone', 'OrderType': 'Stop', 'Price': 159.2, 'SequenceId': '2903583899', 'Status': 'Cancelled', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
🧹 SL注文がキャンセル: OrderID=5358707380, Status=cancelled
ENSから注文ステータス変更イベント: OrderID=5358707380, Status=cancelled
[2026-01-09 12:10:00] UIC 42 の最新ポジションを発見しました。
[2026-01-09 12:10:00] 決済注文データ: Buy 50000.0 units of UIC 42
[2026-01-09 12:10:00] USD/JPY の決済注文が受付されました。OrderId: 5358707414
[2026-01-09 12:10:00] 決済注文が受付されました。OrderID: 5358707414
[2026-01-09 12:10:00] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 12:10:00] ENSイベントを監視中 (OrderID: 5358707414, UIC: 42, タイプ: ['order_fill'])...
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T03:10:00.440508Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Buy', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': 'd75ec0ba-e52d-4c54-b88e-39a57fff56f3', 'Duration': {'DurationType': 'DayOrder'}, 'ExternalReference': '20260109_trade_53_exit_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358707414', 'OrderRelation': 'StandAlone', 'OrderType': 'Market', 'SequenceId': '2903583905', 'Status': 'Placed', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T03:10:00.441509Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'AveragePrice': 157.173, 'BuySell': 'Buy', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': 'd75ec0ba-e52d-4c54-b88e-39a57fff56f3', 'Duration': {'DurationType': 'DayOrder'}, 'ExecutionPrice': 157.173, 'ExternalReference': '20260109_trade_53_exit_v1', 'FillAmount': 50000.0, 'FilledAmount': 50000.0, 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358707414', 'OrderRelation': 'StandAlone', 'OrderType': 'Market', 'PositionId': '7426208086', 'SequenceId': '2903583907', 'Status': 'FinalFill', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42, 'ValueDate': '2026-01-14', 'Venue': 'XXXX'}
✨ ENSから注文完全約定イベント: OrderID=5358707414, Price=157.173
[2026-01-09 12:10:00] ★ ENSで期待するイベント(order_fill)を受信しました: {'type': 'order_fill', 'order_id': '5358707414', 'execution_price': Decimal('157.173'), 'execution_time': '2026-01-09T03:10:00.441509Z', 'filled_amount': Decimal('50000.0'), 'amount': Decimal('50000.0'), 'status': 'filled', 'uic': 42, 'position_id': '7426208086'}
[2026-01-09 12:10:00] イベント 'order_fill' により決済を確認しました。
[2026-01-09 12:10:00] ポジション情報を検索中 (UIC: 42)...
[2026-01-09 12:10:01] ClosedPositionsに該当がなくても保有ポジションなしと判定: UIC=42
[2026-01-09 12:10:02] Discord通知を送信しました。ステータス: 204
[2026-01-09 12:10:02] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 12:10:02] エントリー 取引ID 54 (USD/JPY Buy): 目標時刻=16:55:00, ゆらぎ=2.17秒, 最終実行時刻=16:54:57
[2026-01-09 12:10:02] 次のアクション 'PING_60S' まで 17035.06 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 12:23:22] アクセストークンを更新しています...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 12:23:24] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 12:27:04, last_message_id=62, last_ping_ok_at=2026-01-09 12:27:16, last_ping_rtt_ms=0.4
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=False, contextId=ctx-7928029258-pkcbwtwt, messageid=62
[2026-01-09 12:27:25] アクセストークンを更新しています...
[2026-01-09 12:27:26] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7928029258-pkcbwtwt&authorization=***&messageid=62
ENS monitor task cancelled
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7928029258-pkcbwtwt, messageid=0
[2026-01-09 12:27:28] アクセストークンを更新しています...
[2026-01-09 12:27:30] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 12:27:30] ENSサブスクリプションを作成中...
[2026-01-09 12:27:30] ストリーミング用ContextId生成: ctx-7929250079-4eo68xlf
[2026-01-09 12:27:31] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7929250079-4eo68xlf&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7929250079-4eo68xlf&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 12:41:24] アクセストークンを更新しています...
[2026-01-09 12:41:25] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 12:47:17, last_message_id=58, last_ping_ok_at=2026-01-09 12:47:28, last_ping_rtt_ms=0.3
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=False, contextId=ctx-7929250079-4eo68xlf, messageid=58
[2026-01-09 12:47:35] アクセストークンを更新しています...
[2026-01-09 12:47:36] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7929250079-4eo68xlf&authorization=***&messageid=58
ENS monitor task cancelled
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7929250079-4eo68xlf, messageid=0
[2026-01-09 12:47:39] アクセストークンを更新しています...
[2026-01-09 12:47:40] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 12:47:40] ENSサブスクリプションを作成中...
[2026-01-09 12:47:40] ストリーミング用ContextId生成: ctx-7930460403-wvxah3kf
[2026-01-09 12:47:42] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7930460403-wvxah3kf&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7930460403-wvxah3kf&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 12:59:25] アクセストークンを更新しています...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 12:59:26] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 13:07:27, last_message_id=58, last_ping_ok_at=2026-01-09 13:07:39, last_ping_rtt_ms=0.3
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=False, contextId=ctx-7930460403-wvxah3kf, messageid=58
[2026-01-09 13:07:48] アクセストークンを更新しています...
ENS ping失敗: no close frame received or sent (ConnectionClosedError)
[2026-01-09 13:07:50] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7930460403-wvxah3kf&authorization=***&messageid=58
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS接続監視モニターを開始します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7930460403-wvxah3kf, messageid=0
[2026-01-09 13:07:52] アクセストークンを更新しています...
[2026-01-09 13:07:53] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 13:07:53] ENSサブスクリプションを作成中...
[2026-01-09 13:07:53] ストリーミング用ContextId生成: ctx-7931673706-awj72ra2
[2026-01-09 13:07:55] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7931673706-awj72ra2&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7931673706-awj72ra2&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 13:17:26] アクセストークンを更新しています...
[2026-01-09 13:17:28] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 13:27:41, last_message_id=58, last_ping_ok_at=2026-01-09 13:27:51, last_ping_rtt_ms=0.3
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS ping失敗: no close frame received or sent (ConnectionClosedError)
ENS再接続開始: force_new_context=False, contextId=ctx-7931673706-awj72ra2, messageid=58
[2026-01-09 13:28:02] アクセストークンを更新しています...
[2026-01-09 13:28:03] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7931673706-awj72ra2&authorization=***&messageid=58
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7931673706-awj72ra2, messageid=0
[2026-01-09 13:28:05] アクセストークンを更新しています...
[2026-01-09 13:28:06] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 13:28:06] ENSサブスクリプションを作成中...
[2026-01-09 13:28:06] ストリーミング用ContextId生成: ctx-7932886943-d6v4ew9y
[2026-01-09 13:28:08] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7932886943-d6v4ew9y&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7932886943-d6v4ew9y&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 13:35:28] アクセストークンを更新しています...
[2026-01-09 13:35:29] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 13:47:54, last_message_id=58, last_ping_ok_at=2026-01-09 13:48:04, last_ping_rtt_ms=0.3
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=False, contextId=ctx-7932886943-d6v4ew9y, messageid=58
[2026-01-09 13:48:13] アクセストークンを更新しています...
ENS ping失敗: no close frame received or sent (ConnectionClosedError)
[2026-01-09 13:48:15] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7932886943-d6v4ew9y&authorization=***&messageid=58
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7932886943-d6v4ew9y, messageid=0
[2026-01-09 13:48:17] アクセストークンを更新しています...
[2026-01-09 13:48:18] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 13:48:18] ENSサブスクリプションを作成中...
[2026-01-09 13:48:18] ストリーミング用ContextId生成: ctx-7934098960-zzlejqzl
[2026-01-09 13:48:20] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7934098960-zzlejqzl&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7934098960-zzlejqzl&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 13:53:29] アクセストークンを更新しています...
[2026-01-09 13:53:30] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 14:08:05, last_message_id=58, last_ping_ok_at=2026-01-09 14:08:16, last_ping_rtt_ms=0.4
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=False, contextId=ctx-7934098960-zzlejqzl, messageid=58
[2026-01-09 14:08:26] アクセストークンを更新しています...
ENS ping失敗: no close frame received or sent (ConnectionClosedError)
[2026-01-09 14:08:27] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7934098960-zzlejqzl&authorization=***&messageid=58
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS接続監視モニターを開始します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7934098960-zzlejqzl, messageid=0
[2026-01-09 14:08:30] アクセストークンを更新しています...
[2026-01-09 14:08:31] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 14:08:31] ENSサブスクリプションを作成中...
[2026-01-09 14:08:31] ストリーミング用ContextId生成: ctx-7935311519-y4tain5l
[2026-01-09 14:08:33] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7935311519-y4tain5l&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7935311519-y4tain5l&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 14:11:30] アクセストークンを更新しています...
[2026-01-09 14:11:32] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 14:28:18, last_message_id=58, last_ping_ok_at=2026-01-09 14:28:29, last_ping_rtt_ms=0.3
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=False, contextId=ctx-7935311519-y4tain5l, messageid=58
[2026-01-09 14:28:39] アクセストークンを更新しています...
ENS ping失敗: no close frame received or sent (ConnectionClosedError)
[2026-01-09 14:28:41] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7935311519-y4tain5l&authorization=***&messageid=58
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7935311519-y4tain5l, messageid=0
[2026-01-09 14:28:43] アクセストークンを更新しています...
[2026-01-09 14:28:44] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 14:28:44] ENSサブスクリプションを作成中...
[2026-01-09 14:28:44] ストリーミング用ContextId生成: ctx-7936524356-h3itlhrl
[2026-01-09 14:28:45] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7936524356-h3itlhrl&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7936524356-h3itlhrl&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 14:29:32] アクセストークンを更新しています...
[2026-01-09 14:29:33] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 14:47:33] アクセストークンを更新しています...
[2026-01-09 14:47:34] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 14:48:32, last_message_id=58, last_ping_ok_at=2026-01-09 14:48:52, last_ping_rtt_ms=0.3
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=False, contextId=ctx-7936524356-h3itlhrl, messageid=58
[2026-01-09 14:48:53] アクセストークンを更新しています...
[2026-01-09 14:48:54] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7936524356-h3itlhrl&authorization=***&messageid=58
ENS monitor task cancelled
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7936524356-h3itlhrl, messageid=0
[2026-01-09 14:48:57] アクセストークンを更新しています...
[2026-01-09 14:48:58] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 14:48:58] ENSサブスクリプションを作成中...
[2026-01-09 14:48:58] ストリーミング用ContextId生成: ctx-7937738165-zd2hz47j
[2026-01-09 14:48:59] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7937738165-zd2hz47j&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7937738165-zd2hz47j&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 15:05:34] アクセストークンを更新しています...
[2026-01-09 15:05:36] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 15:08:46, last_message_id=58, last_ping_ok_at=2026-01-09 15:08:56, last_ping_rtt_ms=0.3
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS ping失敗: no close frame received or sent (ConnectionClosedError)
ENS再接続開始: force_new_context=False, contextId=ctx-7937738165-zd2hz47j, messageid=58
[2026-01-09 15:09:07] アクセストークンを更新しています...
[2026-01-09 15:09:08] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7937738165-zd2hz47j&authorization=***&messageid=58
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7937738165-zd2hz47j, messageid=0
[2026-01-09 15:09:10] アクセストークンを更新しています...
[2026-01-09 15:09:12] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 15:09:12] ENSサブスクリプションを作成中...
[2026-01-09 15:09:12] ストリーミング用ContextId生成: ctx-7938952115-9shmbiiv
[2026-01-09 15:09:13] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7938952115-9shmbiiv&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7938952115-9shmbiiv&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 15:23:36] アクセストークンを更新しています...
[2026-01-09 15:23:37] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 15:28:59, last_message_id=58, last_ping_ok_at=2026-01-09 15:29:09, last_ping_rtt_ms=0.3
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=False, contextId=ctx-7938952115-9shmbiiv, messageid=58
[2026-01-09 15:29:18] アクセストークンを更新しています...
ENS ping失敗: no close frame received or sent (ConnectionClosedError)
[2026-01-09 15:29:19] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7938952115-9shmbiiv&authorization=***&messageid=58
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS接続監視モニターを開始します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7938952115-9shmbiiv, messageid=0
[2026-01-09 15:29:22] アクセストークンを更新しています...
[2026-01-09 15:29:24] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 15:29:24] ENSサブスクリプションを作成中...
[2026-01-09 15:29:24] ストリーミング用ContextId生成: ctx-7940164058-ssxa2bqu
[2026-01-09 15:29:25] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7940164058-ssxa2bqu&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7940164058-ssxa2bqu&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 15:41:37] アクセストークンを更新しています...
[2026-01-09 15:41:39] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 15:43:28, last_message_id=41, last_ping_ok_at=2026-01-09 15:43:22, last_ping_rtt_ms=0.4
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=False, contextId=ctx-7940164058-ssxa2bqu, messageid=41
[2026-01-09 15:43:30] アクセストークンを更新しています...
[2026-01-09 15:43:31] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7940164058-ssxa2bqu&authorization=***&messageid=41
ENS monitor task cancelled
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7940164058-ssxa2bqu, messageid=0
[2026-01-09 15:43:33] アクセストークンを更新しています...
[2026-01-09 15:43:34] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 15:43:34] ENSサブスクリプションを作成中...
[2026-01-09 15:43:34] ストリーミング用ContextId生成: ctx-7941014957-2drrnrqw
[2026-01-09 15:43:36] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7941014957-2drrnrqw&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7941014957-2drrnrqw&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 15:59:39] アクセストークンを更新しています...
[2026-01-09 15:59:40] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 16:03:22, last_message_id=58, last_ping_ok_at=2026-01-09 16:03:32, last_ping_rtt_ms=0.3
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS ping失敗: no close frame received or sent (ConnectionClosedError)
ENS再接続開始: force_new_context=False, contextId=ctx-7941014957-2drrnrqw, messageid=58
[2026-01-09 16:03:43] アクセストークンを更新しています...
[2026-01-09 16:03:44] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7941014957-2drrnrqw&authorization=***&messageid=58
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7941014957-2drrnrqw, messageid=0
[2026-01-09 16:03:47] アクセストークンを更新しています...
[2026-01-09 16:03:48] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 16:03:48] ENSサブスクリプションを作成中...
[2026-01-09 16:03:48] ストリーミング用ContextId生成: ctx-7942228397-ix4t2oa2
[2026-01-09 16:03:49] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7942228397-ix4t2oa2&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7942228397-ix4t2oa2&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 16:17:40] アクセストークンを更新しています...
[2026-01-09 16:17:42] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 16:23:36, last_message_id=58, last_ping_ok_at=2026-01-09 16:23:46, last_ping_rtt_ms=0.3
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS ping失敗: no close frame received or sent (ConnectionClosedError)
ENS再接続開始: force_new_context=False, contextId=ctx-7942228397-ix4t2oa2, messageid=58
[2026-01-09 16:23:57] アクセストークンを更新しています...
[2026-01-09 16:23:58] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7942228397-ix4t2oa2&authorization=***&messageid=58
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7942228397-ix4t2oa2, messageid=0
[2026-01-09 16:24:00] アクセストークンを更新しています...
[2026-01-09 16:24:02] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 16:24:02] ENSサブスクリプションを作成中...
[2026-01-09 16:24:02] ストリーミング用ContextId生成: ctx-7943442078-kna5t09j
[2026-01-09 16:24:03] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7943442078-kna5t09j&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7943442078-kna5t09j&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 16:35:42] アクセストークンを更新しています...
[2026-01-09 16:35:44] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 16:43:49, last_message_id=58, last_ping_ok_at=2026-01-09 16:43:59, last_ping_rtt_ms=0.3
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS ping失敗: no close frame received or sent (ConnectionClosedError)
ENS再接続開始: force_new_context=False, contextId=ctx-7943442078-kna5t09j, messageid=58
[2026-01-09 16:44:10] アクセストークンを更新しています...
[2026-01-09 16:44:12] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7943442078-kna5t09j&authorization=***&messageid=58
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7943442078-kna5t09j, messageid=0
[2026-01-09 16:44:14] アクセストークンを更新しています...
[2026-01-09 16:44:15] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 16:44:15] ENSサブスクリプションを作成中...
[2026-01-09 16:44:15] ストリーミング用ContextId生成: ctx-7944655701-80g7i8au
[2026-01-09 16:44:16] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7944655701-80g7i8au&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7944655701-80g7i8au&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 16:53:44] アクセストークンを更新しています...
[2026-01-09 16:53:45] アクセストークンを正常に更新しました。
[2026-01-09 16:53:57] 接続の事前確認 (PING_60S) を行います...
[2026-01-09 16:53:57] 現在のアクセストークンを検証しています...
[2026-01-09 16:53:59] トークン検証成功。
[2026-01-09 16:53:59] 事前確認 (PING_60S) 成功。
[2026-01-09 16:53:59] 次のアクション 'PING_30S' まで 28.61 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 16:54:27] 接続の事前確認 (PING_30S) を行います...
[2026-01-09 16:54:27] 現在のアクセストークンを検証しています...
[2026-01-09 16:54:28] トークン検証成功。
[2026-01-09 16:54:28] 事前確認 (PING_30S) 成功。
[2026-01-09 16:54:28] 次のアクション 'FINAL_ACTION' まで 29.71 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 16:54:57] エントリー 取引ID 54 (USD/JPY Buy) の実行時刻になりました。
[2026-01-09 16:54:57] --- 取引ID 54 (USD/JPY Buy) のエントリー処理開始 ---
[2026-01-09 16:54:57] 価格情報を取得します。UICs: 42, AssetType: FxSpot, FieldGroups: Quote,DisplayAndFormat,PriceInfo
[2026-01-09 16:54:58] エントリー処理開始 (UIC: 42, Side: Buy, Amount: 50000.0)...
[2026-01-09 16:54:58] UIC 42 の既存取引（ポジション/Working注文）を確認中...
[2026-01-09 16:54:58] UIC 42 の既存取引は見つかりませんでした。
[2026-01-09 16:54:58] 既存取引がないため、新規注文を発注します...
[2026-01-09 16:54:58] 価格情報を取得します。UICs: 42, AssetType: FxSpot, FieldGroups: Quote,DisplayAndFormat
[2026-01-09 16:54:59] 関連注文を確認: 1件
[2026-01-09 16:54:59] ✅ SL注文が成立: OrderId=5358729094, Type=None
[2026-01-09 16:54:59]   関連注文1: OrderId=5358729094, Status=None, Type=None
[2026-01-09 16:54:59] Market + SL 注文送信完了: OrderId=5358729093
[2026-01-09 16:54:59] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 16:54:59] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 16:54:59] ENSイベントを監視中 (OrderID: 5358729093, UIC: 42, タイプ: ['order_fill'])...
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T07:54:59.235053Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Buy', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': 'ca6b1934-66f0-4854-94a9-52376dd73ae5', 'Duration': {'DurationType': 'DayOrder'}, 'ExternalReference': '20260109_trade_54_entry_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358729093', 'OrderRelation': 'IfDoneMaster', 'OrderType': 'Market', 'RelatedOrderId': ['5358729094'], 'RelatedOrderIds': ['5358729094'], 'SequenceId': '2903725212', 'Status': 'Placed', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T07:54:59.235053Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Sell', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': 'ca6b1934-66f0-4854-94a9-52376dd73ae5', 'Duration': {'DurationType': 'GoodTillCancel'}, 'ExternalReference': '20260109_trade_54_entry_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358729094', 'OrderRelation': 'IfDoneSlave', 'OrderType': 'Stop', 'Price': 155.52, 'RelatedOrderId': ['5358729093'], 'RelatedOrderIds': ['5358729093'], 'SequenceId': '2903725213', 'Status': 'Placed', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T07:54:59.236053Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'AveragePrice': 157.516, 'BuySell': 'Buy', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': 'ca6b1934-66f0-4854-94a9-52376dd73ae5', 'Duration': {'DurationType': 'DayOrder'}, 'ExecutionPrice': 157.516, 'ExternalReference': '20260109_trade_54_entry_v1', 'FillAmount': 50000.0, 'FilledAmount': 50000.0, 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358729093', 'OrderRelation': 'IfDoneMaster', 'OrderType': 'Market', 'PositionId': '7426275758', 'RelatedOrderId': ['5358729094'], 'RelatedOrderIds': ['5358729094'], 'SequenceId': '2903725215', 'Status': 'FinalFill', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42, 'ValueDate': '2026-01-14', 'Venue': 'XXXX'}
✨ ENSから注文完全約定イベント: OrderID=5358729093, Price=157.516
[2026-01-09 16:54:59] ★ ENSで期待するイベント(order_fill)を受信しました: {'type': 'order_fill', 'order_id': '5358729093', 'execution_price': Decimal('157.516'), 'execution_time': '2026-01-09T07:54:59.236053Z', 'filled_amount': Decimal('50000.0'), 'amount': Decimal('50000.0'), 'status': 'filled', 'uic': 42, 'position_id': '7426275758'}
[2026-01-09 16:54:59] ✅ エントリー成功: 取引ID 54 (USD/JPY Buy)
[2026-01-09 16:55:00] Discord通知を送信しました。ステータス: 204
[2026-01-09 16:55:00] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 16:55:00] 決済 取引ID 54 (USD/JPY Buy): 目標時刻=16:57:00, ゆらぎ=0.37秒, 最終実行時刻=16:56:59
[2026-01-09 16:55:00] 次のアクション 'PING_60S' まで 58.79 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 16:55:59] 接続の事前確認 (PING_60S) を行います...
[2026-01-09 16:55:59] 現在のアクセストークンを検証しています...
[2026-01-09 16:55:59] トークン検証成功。
[2026-01-09 16:55:59] 事前確認 (PING_60S) 成功。
[2026-01-09 16:55:59] 次のアクション 'PING_30S' まで 29.71 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 16:56:29] 接続の事前確認 (PING_30S) を行います...
[2026-01-09 16:56:29] 現在のアクセストークンを検証しています...
[2026-01-09 16:56:29] トークン検証成功。
[2026-01-09 16:56:29] 事前確認 (PING_30S) 成功。
[2026-01-09 16:56:29] 次のアクション 'FINAL_ACTION' まで 29.72 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 16:56:59] 決済 取引ID 54 (USD/JPY Buy) の実行時刻になりました。
[2026-01-09 16:56:59] --- 取引ID 54 (USD/JPY Buy) の決済処理開始 ---
[2026-01-09 16:56:59] ポジション情報を検索中 (UIC: 42)...
[2026-01-09 16:56:59] UIC 42 の最新ポジションを発見しました。
[2026-01-09 16:57:00] UIC 42 のSL候補注文はありません。追跡IDがないため全Working注文をキャンセルします。
[2026-01-09 16:57:00] 注文キャンセルを実行しました: OrderId=5358729094
[2026-01-09 16:57:00] ポジション 7426275758 (USD/JPY) の決済処理開始...
[2026-01-09 16:57:00] ポジション情報を検索中 (UIC: 42)...
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T07:57:00.380673Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Sell', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': 'ca6b1934-66f0-4854-94a9-52376dd73ae5', 'Duration': {'DurationType': 'GoodTillCancel'}, 'ExternalReference': '20260109_trade_54_entry_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358729094', 'OrderRelation': 'StandAlone', 'OrderType': 'Stop', 'Price': 155.52, 'SequenceId': '2903726531', 'Status': 'Cancelled', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
🧹 SL注文がキャンセル: OrderID=5358729094, Status=cancelled
ENSから注文ステータス変更イベント: OrderID=5358729094, Status=cancelled
[2026-01-09 16:57:00] UIC 42 の最新ポジションを発見しました。
[2026-01-09 16:57:00] 決済注文データ: Sell 50000.0 units of UIC 42
[2026-01-09 16:57:01] USD/JPY の決済注文が受付されました。OrderId: 5358729118
[2026-01-09 16:57:01] 決済注文が受付されました。OrderID: 5358729118
[2026-01-09 16:57:01] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 16:57:01] ENSイベントを監視中 (OrderID: 5358729118, UIC: 42, タイプ: ['order_fill'])...
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T07:57:00.967500Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Sell', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': '4b654f44-3af7-4e1c-a833-dbedb96abee4', 'Duration': {'DurationType': 'DayOrder'}, 'ExternalReference': '20260109_trade_54_exit_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358729118', 'OrderRelation': 'StandAlone', 'OrderType': 'Market', 'SequenceId': '2903726541', 'Status': 'Placed', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T07:57:00.967500Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'AveragePrice': 157.522, 'BuySell': 'Sell', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': '4b654f44-3af7-4e1c-a833-dbedb96abee4', 'Duration': {'DurationType': 'DayOrder'}, 'ExecutionPrice': 157.522, 'ExternalReference': '20260109_trade_54_exit_v1', 'FillAmount': 50000.0, 'FilledAmount': 50000.0, 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358729118', 'OrderRelation': 'StandAlone', 'OrderType': 'Market', 'PositionId': '7426279440', 'SequenceId': '2903726543', 'Status': 'FinalFill', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42, 'ValueDate': '2026-01-14', 'Venue': 'XXXX'}
✨ ENSから注文完全約定イベント: OrderID=5358729118, Price=157.522
[2026-01-09 16:57:01] ★ ENSで期待するイベント(order_fill)を受信しました: {'type': 'order_fill', 'order_id': '5358729118', 'execution_price': Decimal('157.522'), 'execution_time': '2026-01-09T07:57:00.967500Z', 'filled_amount': Decimal('50000.0'), 'amount': Decimal('50000.0'), 'status': 'filled', 'uic': 42, 'position_id': '7426279440'}
[2026-01-09 16:57:01] イベント 'order_fill' により決済を確認しました。
[2026-01-09 16:57:01] ポジション情報を検索中 (UIC: 42)...
[2026-01-09 16:57:01] ClosedPositionsに該当がなくても保有ポジションなしと判定: UIC=42
[2026-01-09 16:57:03] Discord通知を送信しました。ステータス: 204
[2026-01-09 16:57:03] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 16:57:03] エントリー 取引ID 55 (USD/JPY Buy): 目標時刻=17:52:00, ゆらぎ=0.55秒, 最終実行時刻=17:51:59
[2026-01-09 16:57:03] 次のアクション 'PING_60S' まで 3236.25 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 17:04:03, last_message_id=64, last_ping_ok_at=2026-01-09 17:04:13, last_ping_rtt_ms=0.4
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS ping失敗: no close frame received or sent (ConnectionClosedError)
ENS再接続開始: force_new_context=False, contextId=ctx-7944655701-80g7i8au, messageid=64
[2026-01-09 17:04:24] アクセストークンを更新しています...
[2026-01-09 17:04:25] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7944655701-80g7i8au&authorization=***&messageid=64
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7944655701-80g7i8au, messageid=0
[2026-01-09 17:04:28] アクセストークンを更新しています...
[2026-01-09 17:04:29] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 17:04:29] ENSサブスクリプションを作成中...
[2026-01-09 17:04:29] ストリーミング用ContextId生成: ctx-7945869329-xmadt8al
[2026-01-09 17:04:29] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7945869329-xmadt8al&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7945869329-xmadt8al&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 17:11:45] アクセストークンを更新しています...
[2026-01-09 17:11:46] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 17:24:13, last_message_id=58, last_ping_ok_at=2026-01-09 17:24:25, last_ping_rtt_ms=0.3
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=False, contextId=ctx-7945869329-xmadt8al, messageid=58
[2026-01-09 17:24:34] アクセストークンを更新しています...
ENS ping失敗: no close frame received or sent (ConnectionClosedError)
[2026-01-09 17:24:36] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7945869329-xmadt8al&authorization=***&messageid=58
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7945869329-xmadt8al, messageid=0
[2026-01-09 17:24:39] アクセストークンを更新しています...
[2026-01-09 17:24:40] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 17:24:40] ENSサブスクリプションを作成中...
[2026-01-09 17:24:40] ストリーミング用ContextId生成: ctx-7947080730-nbvhilxq
[2026-01-09 17:24:42] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7947080730-nbvhilxq&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7947080730-nbvhilxq&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 17:29:46] アクセストークンを更新しています...
[2026-01-09 17:29:48] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 17:44:27, last_message_id=58, last_ping_ok_at=2026-01-09 17:44:39, last_ping_rtt_ms=0.3
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=False, contextId=ctx-7947080730-nbvhilxq, messageid=58
[2026-01-09 17:44:48] アクセストークンを更新しています...
ENS ping失敗: no close frame received or sent (ConnectionClosedError)
[2026-01-09 17:44:49] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7947080730-nbvhilxq&authorization=***&messageid=58
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7947080730-nbvhilxq, messageid=0
[2026-01-09 17:44:51] アクセストークンを更新しています...
[2026-01-09 17:44:53] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 17:44:53] ENSサブスクリプションを作成中...
[2026-01-09 17:44:53] ストリーミング用ContextId生成: ctx-7948293095-ane2ldqm
[2026-01-09 17:44:54] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7948293095-ane2ldqm&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7948293095-ane2ldqm&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 17:47:48] アクセストークンを更新しています...
[2026-01-09 17:47:49] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 17:50:59] 接続の事前確認 (PING_60S) を行います...
[2026-01-09 17:50:59] 現在のアクセストークンを検証しています...
[2026-01-09 17:50:59] トークン検証成功。
[2026-01-09 17:50:59] 事前確認 (PING_60S) 成功。
[2026-01-09 17:50:59] 次のアクション 'PING_30S' まで 29.68 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 17:51:29] 接続の事前確認 (PING_30S) を行います...
[2026-01-09 17:51:29] 現在のアクセストークンを検証しています...
[2026-01-09 17:51:29] トークン検証成功。
[2026-01-09 17:51:29] 事前確認 (PING_30S) 成功。
[2026-01-09 17:51:29] 次のアクション 'FINAL_ACTION' まで 29.72 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 17:51:59] エントリー 取引ID 55 (USD/JPY Buy) の実行時刻になりました。
[2026-01-09 17:51:59] --- 取引ID 55 (USD/JPY Buy) のエントリー処理開始 ---
[2026-01-09 17:51:59] 価格情報を取得します。UICs: 42, AssetType: FxSpot, FieldGroups: Quote,DisplayAndFormat,PriceInfo
[2026-01-09 17:51:59] エントリー処理開始 (UIC: 42, Side: Buy, Amount: 50000.0)...
[2026-01-09 17:51:59] UIC 42 の既存取引（ポジション/Working注文）を確認中...
[2026-01-09 17:52:00] UIC 42 の既存取引は見つかりませんでした。
[2026-01-09 17:52:00] 既存取引がないため、新規注文を発注します...
[2026-01-09 17:52:00] 価格情報を取得します。UICs: 42, AssetType: FxSpot, FieldGroups: Quote,DisplayAndFormat
[2026-01-09 17:52:00] 関連注文を確認: 1件
[2026-01-09 17:52:00] ✅ SL注文が成立: OrderId=5358751772, Type=None
[2026-01-09 17:52:00]   関連注文1: OrderId=5358751772, Status=None, Type=None
[2026-01-09 17:52:00] Market + SL 注文送信完了: OrderId=5358751771
[2026-01-09 17:52:00] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 17:52:00] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 17:52:00] ENSイベントを監視中 (OrderID: 5358751771, UIC: 42, タイプ: ['order_fill'])...
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T08:52:00.808113Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Buy', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': '9585d4d6-6056-4fe4-8dc3-24751fd4787e', 'Duration': {'DurationType': 'DayOrder'}, 'ExternalReference': '20260109_trade_55_entry_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358751771', 'OrderRelation': 'IfDoneMaster', 'OrderType': 'Market', 'RelatedOrderId': ['5358751772'], 'RelatedOrderIds': ['5358751772'], 'SequenceId': '2903838010', 'Status': 'Placed', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T08:52:00.808113Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Sell', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': '9585d4d6-6056-4fe4-8dc3-24751fd4787e', 'Duration': {'DurationType': 'GoodTillCancel'}, 'ExternalReference': '20260109_trade_55_entry_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358751772', 'OrderRelation': 'IfDoneSlave', 'OrderType': 'Stop', 'Price': 155.65, 'RelatedOrderId': ['5358751771'], 'RelatedOrderIds': ['5358751771'], 'SequenceId': '2903838011', 'Status': 'Placed', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T08:52:00.809112Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'AveragePrice': 157.648, 'BuySell': 'Buy', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': '9585d4d6-6056-4fe4-8dc3-24751fd4787e', 'Duration': {'DurationType': 'DayOrder'}, 'ExecutionPrice': 157.648, 'ExternalReference': '20260109_trade_55_entry_v1', 'FillAmount': 50000.0, 'FilledAmount': 50000.0, 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358751771', 'OrderRelation': 'IfDoneMaster', 'OrderType': 'Market', 'PositionId': '7426377192', 'RelatedOrderId': ['5358751772'], 'RelatedOrderIds': ['5358751772'], 'SequenceId': '2903838013', 'Status': 'FinalFill', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42, 'ValueDate': '2026-01-14', 'Venue': 'XXXX'}
✨ ENSから注文完全約定イベント: OrderID=5358751771, Price=157.648
[2026-01-09 17:52:01] ★ ENSで期待するイベント(order_fill)を受信しました: {'type': 'order_fill', 'order_id': '5358751771', 'execution_price': Decimal('157.648'), 'execution_time': '2026-01-09T08:52:00.809112Z', 'filled_amount': Decimal('50000.0'), 'amount': Decimal('50000.0'), 'status': 'filled', 'uic': 42, 'position_id': '7426377192'}
[2026-01-09 17:52:01] ✅ エントリー成功: 取引ID 55 (USD/JPY Buy)
[2026-01-09 17:52:02] Discord通知を送信しました。ステータス: 204
[2026-01-09 17:52:02] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 17:52:02] 決済 取引ID 55 (USD/JPY Buy): 目標時刻=17:59:58, ゆらぎ=2.38秒, 最終実行時刻=17:59:55
[2026-01-09 17:52:02] 次のアクション 'PING_60S' まで 413.16 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 17:58:55] 接続の事前確認 (PING_60S) を行います...
[2026-01-09 17:58:55] 現在のアクセストークンを検証しています...
[2026-01-09 17:58:55] トークン検証成功。
[2026-01-09 17:58:55] 事前確認 (PING_60S) 成功。
[2026-01-09 17:58:55] 次のアクション 'PING_30S' まで 29.67 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 17:59:25] 接続の事前確認 (PING_30S) を行います...
[2026-01-09 17:59:25] 現在のアクセストークンを検証しています...
[2026-01-09 17:59:25] トークン検証成功。
[2026-01-09 17:59:25] 事前確認 (PING_30S) 成功。
[2026-01-09 17:59:25] 次のアクション 'FINAL_ACTION' まで 29.69 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 17:59:55] 決済 取引ID 55 (USD/JPY Buy) の実行時刻になりました。
[2026-01-09 17:59:55] --- 取引ID 55 (USD/JPY Buy) の決済処理開始 ---
[2026-01-09 17:59:55] ポジション情報を検索中 (UIC: 42)...
[2026-01-09 17:59:55] UIC 42 の最新ポジションを発見しました。
[2026-01-09 17:59:56] UIC 42 のSL候補注文はありません。追跡IDがないため全Working注文をキャンセルします。
[2026-01-09 17:59:56] 注文キャンセルを実行しました: OrderId=5358751772
[2026-01-09 17:59:56] ポジション 7426377192 (USD/JPY) の決済処理開始...
[2026-01-09 17:59:56] ポジション情報を検索中 (UIC: 42)...
[2026-01-09 17:59:56] UIC 42 の最新ポジションを発見しました。
[2026-01-09 17:59:56] 決済注文データ: Sell 50000.0 units of UIC 42
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T08:59:56.355283Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Sell', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': '9585d4d6-6056-4fe4-8dc3-24751fd4787e', 'Duration': {'DurationType': 'GoodTillCancel'}, 'ExternalReference': '20260109_trade_55_entry_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358751772', 'OrderRelation': 'StandAlone', 'OrderType': 'Stop', 'Price': 155.65, 'SequenceId': '2903848026', 'Status': 'Cancelled', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
🧹 SL注文がキャンセル: OrderID=5358751772, Status=cancelled
ENSから注文ステータス変更イベント: OrderID=5358751772, Status=cancelled
[2026-01-09 17:59:57] USD/JPY の決済注文が受付されました。OrderId: 5358753335
[2026-01-09 17:59:57] 決済注文が受付されました。OrderID: 5358753335
[2026-01-09 17:59:57] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 17:59:57] ENSイベントを監視中 (OrderID: 5358753335, UIC: 42, タイプ: ['order_fill'])...
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T08:59:56.962820Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Sell', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': 'd63b4cef-a052-4c97-aaff-4853241b549c', 'Duration': {'DurationType': 'DayOrder'}, 'ExternalReference': '20260109_trade_55_exit_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358753335', 'OrderRelation': 'StandAlone', 'OrderType': 'Market', 'SequenceId': '2903848044', 'Status': 'Placed', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T08:59:56.963797Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'AveragePrice': 157.647, 'BuySell': 'Sell', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': 'd63b4cef-a052-4c97-aaff-4853241b549c', 'Duration': {'DurationType': 'DayOrder'}, 'ExecutionPrice': 157.647, 'ExternalReference': '20260109_trade_55_exit_v1', 'FillAmount': 50000.0, 'FilledAmount': 50000.0, 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358753335', 'OrderRelation': 'StandAlone', 'OrderType': 'Market', 'PositionId': '7426383460', 'SequenceId': '2903848046', 'Status': 'FinalFill', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42, 'ValueDate': '2026-01-14', 'Venue': 'XXXX'}
✨ ENSから注文完全約定イベント: OrderID=5358753335, Price=157.647
[2026-01-09 17:59:57] ★ ENSで期待するイベント(order_fill)を受信しました: {'type': 'order_fill', 'order_id': '5358753335', 'execution_price': Decimal('157.647'), 'execution_time': '2026-01-09T08:59:56.963797Z', 'filled_amount': Decimal('50000.0'), 'amount': Decimal('50000.0'), 'status': 'filled', 'uic': 42, 'position_id': '7426383460'}
[2026-01-09 17:59:57] イベント 'order_fill' により決済を確認しました。
[2026-01-09 17:59:57] ポジション情報を検索中 (UIC: 42)...
[2026-01-09 17:59:58] ClosedPositionsに該当がなくても保有ポジションなしと判定: UIC=42
[2026-01-09 17:59:59] Discord通知を送信しました。ステータス: 204
[2026-01-09 17:59:59] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 17:59:59] エントリー 取引ID 56 (USD/JPY Sell): 目標時刻=18:00:02, ゆらぎ=1.84秒, 最終実行時刻=18:00:00
[2026-01-09 17:59:59] 次のアクション 'FINAL_ACTION' まで 0.80 秒待機します...
[2026-01-09 18:00:00] エントリー 取引ID 56 (USD/JPY Sell) の実行時刻になりました。
[2026-01-09 18:00:00] --- 取引ID 56 (USD/JPY Sell) のエントリー処理開始 ---
[2026-01-09 18:00:00] 価格情報を取得します。UICs: 42, AssetType: FxSpot, FieldGroups: Quote,DisplayAndFormat,PriceInfo
[2026-01-09 18:00:00] エントリー処理開始 (UIC: 42, Side: Sell, Amount: 50000.0)...
[2026-01-09 18:00:00] UIC 42 の既存取引（ポジション/Working注文）を確認中...
[2026-01-09 18:00:00] UIC 42 の既存取引は見つかりませんでした。
[2026-01-09 18:00:00] 既存取引がないため、新規注文を発注します...
[2026-01-09 18:00:00] 価格情報を取得します。UICs: 42, AssetType: FxSpot, FieldGroups: Quote,DisplayAndFormat
[2026-01-09 18:00:01] 関連注文を確認: 1件
[2026-01-09 18:00:01] ✅ SL注文が成立: OrderId=5358753339, Type=None
[2026-01-09 18:00:01]   関連注文1: OrderId=5358753339, Status=None, Type=None
[2026-01-09 18:00:01] Market + SL 注文送信完了: OrderId=5358753338
[2026-01-09 18:00:01] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 18:00:01] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 18:00:01] ENSイベントを監視中 (OrderID: 5358753338, UIC: 42, タイプ: ['order_fill'])...
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T09:00:01.482737Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Sell', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': '5e22de05-977f-4878-aa85-8fb2050332f7', 'Duration': {'DurationType': 'DayOrder'}, 'ExternalReference': '20260109_trade_56_entry_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358753338', 'OrderRelation': 'IfDoneMaster', 'OrderType': 'Market', 'RelatedOrderId': ['5358753339'], 'RelatedOrderIds': ['5358753339'], 'SequenceId': '2903848214', 'Status': 'Placed', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T09:00:01.482737Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Buy', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': '5e22de05-977f-4878-aa85-8fb2050332f7', 'Duration': {'DurationType': 'GoodTillCancel'}, 'ExternalReference': '20260109_trade_56_entry_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358753339', 'OrderRelation': 'IfDoneSlave', 'OrderType': 'Stop', 'Price': 159.64, 'RelatedOrderId': ['5358753338'], 'RelatedOrderIds': ['5358753338'], 'SequenceId': '2903848215', 'Status': 'Placed', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T09:00:01.483736Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'AveragePrice': 157.643, 'BuySell': 'Sell', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': '5e22de05-977f-4878-aa85-8fb2050332f7', 'Duration': {'DurationType': 'DayOrder'}, 'ExecutionPrice': 157.643, 'ExternalReference': '20260109_trade_56_entry_v1', 'FillAmount': 50000.0, 'FilledAmount': 50000.0, 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358753338', 'OrderRelation': 'IfDoneMaster', 'OrderType': 'Market', 'PositionId': '7426383484', 'RelatedOrderId': ['5358753339'], 'RelatedOrderIds': ['5358753339'], 'SequenceId': '2903848217', 'Status': 'FinalFill', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42, 'ValueDate': '2026-01-14', 'Venue': 'XXXX'}
✨ ENSから注文完全約定イベント: OrderID=5358753338, Price=157.643
[2026-01-09 18:00:01] ★ ENSで期待するイベント(order_fill)を受信しました: {'type': 'order_fill', 'order_id': '5358753338', 'execution_price': Decimal('157.643'), 'execution_time': '2026-01-09T09:00:01.483736Z', 'filled_amount': Decimal('50000.0'), 'amount': Decimal('50000.0'), 'status': 'filled', 'uic': 42, 'position_id': '7426383484'}
[2026-01-09 18:00:01] ✅ エントリー成功: 取引ID 56 (USD/JPY Sell)
[2026-01-09 18:00:03] Discord通知を送信しました。ステータス: 204
[2026-01-09 18:00:03] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 18:00:03] 決済 取引ID 56 (USD/JPY Sell): 目標時刻=18:05:00, ゆらぎ=1.10秒, 最終実行時刻=18:04:58
[2026-01-09 18:00:03] 次のアクション 'PING_60S' まで 235.85 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 18:03:58] 接続の事前確認 (PING_60S) を行います...
[2026-01-09 18:03:58] 現在のアクセストークンを検証しています...
[2026-01-09 18:03:59] トークン検証成功。
[2026-01-09 18:03:59] 事前確認 (PING_60S) 成功。
[2026-01-09 18:03:59] 次のアクション 'PING_30S' まで 29.69 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 18:04:28] 接続の事前確認 (PING_30S) を行います...
[2026-01-09 18:04:28] 現在のアクセストークンを検証しています...
[2026-01-09 18:04:29] トークン検証成功。
[2026-01-09 18:04:29] 事前確認 (PING_30S) 成功。
[2026-01-09 18:04:29] 次のアクション 'FINAL_ACTION' まで 29.69 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 18:04:58] 決済 取引ID 56 (USD/JPY Sell) の実行時刻になりました。
[2026-01-09 18:04:58] --- 取引ID 56 (USD/JPY Sell) の決済処理開始 ---
[2026-01-09 18:04:58] ポジション情報を検索中 (UIC: 42)...
[2026-01-09 18:04:59] UIC 42 の最新ポジションを発見しました。
[2026-01-09 18:04:59] UIC 42 のSL候補注文はありません。追跡IDがないため全Working注文をキャンセルします。
[2026-01-09 18:04:59] 注文キャンセルを実行しました: OrderId=5358753339
[2026-01-09 18:04:59] ポジション 7426383484 (USD/JPY) の決済処理開始...
[2026-01-09 18:04:59] ポジション情報を検索中 (UIC: 42)...
[2026-01-09 18:05:00] UIC 42 の最新ポジションを発見しました。
[2026-01-09 18:05:00] 決済注文データ: Buy 50000.0 units of UIC 42
[2026-01-09 18:05:00] USD/JPY の決済注文が受付されました。OrderId: 5358754540
[2026-01-09 18:05:00] 決済注文が受付されました。OrderID: 5358754540
[2026-01-09 18:05:00] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 18:05:00] ENSイベントを監視中 (OrderID: 5358754540, UIC: 42, タイプ: ['order_fill'])...
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 18:04:44, last_message_id=69, last_ping_ok_at=2026-01-09 18:04:50, last_ping_rtt_ms=0.3
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS ping失敗: no close frame received or sent (ConnectionClosedError)
[2026-01-09 18:05:01] エントリー 取引ID 57 (USD/JPY Sell): 目標時刻=18:32:00, ゆらぎ=0.65秒, 最終実行時刻=18:31:59
[2026-01-09 18:05:01] 次のアクション 'PING_60S' まで 1557.95 秒待機します...
ENS再接続開始: force_new_context=False, contextId=ctx-7948293095-ane2ldqm, messageid=69
[2026-01-09 18:05:01] アクセストークンを更新しています...
[2026-01-09 18:05:03] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7948293095-ane2ldqm&authorization=***&messageid=69
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS接続監視モニターを開始します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7948293095-ane2ldqm, messageid=0
[2026-01-09 18:05:05] アクセストークンを更新しています...
[2026-01-09 18:05:06] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 18:05:06] ENSサブスクリプションを作成中...
[2026-01-09 18:05:06] ストリーミング用ContextId生成: ctx-7949506852-emegivjd
[2026-01-09 18:05:07] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7949506852-emegivjd&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7949506852-emegivjd&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 18:05:49] アクセストークンを更新しています...
[2026-01-09 18:05:50] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 18:08:00] タイムアウト(180秒)により、OrderID 5358754540 / UIC 42 の ['order_fill'] イベントを確認できませんでした。
[2026-01-09 18:08:00] ENSでの決済確認がタイムアウトしました。フォールバック機能（監査API）で確認します。
[2026-01-09 18:08:00] フォールバック実行: 監査APIで注文 5358754540 の状態を確認します。
[2026-01-09 18:08:00] 監査APIから応答あり: Status=FinalFill
[2026-01-09 18:08:00] ★ 監査APIにより約定を確認: 価格=157.628
[2026-01-09 18:08:00] イベント 'order_fill_fallback' により決済を確認しました。
[2026-01-09 18:08:00] ポジション情報を検索中 (UIC: 42)...
[2026-01-09 18:08:01] ClosedPositionsに該当がなくても保有ポジションなしと判定: UIC=42
[2026-01-09 18:08:02] Discord通知を送信しました。ステータス: 204
[2026-01-09 18:08:02] 取引ステータスを trade_status.json に保存しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 18:23:50] アクセストークンを更新しています...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 18:23:52] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 18:24:50, last_message_id=58, last_ping_ok_at=2026-01-09 18:25:03, last_ping_rtt_ms=0.3
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=False, contextId=ctx-7949506852-emegivjd, messageid=58
[2026-01-09 18:25:12] アクセストークンを更新しています...
[2026-01-09 18:25:13] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7949506852-emegivjd&authorization=***&messageid=58
ENS monitor task cancelled
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS接続監視モニターを開始します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7949506852-emegivjd, messageid=0
[2026-01-09 18:25:15] アクセストークンを更新しています...
[2026-01-09 18:25:16] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 18:25:16] ENSサブスクリプションを作成中...
[2026-01-09 18:25:16] ストリーミング用ContextId生成: ctx-7950716866-rsamkuq7
[2026-01-09 18:25:18] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7950716866-rsamkuq7&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7950716866-rsamkuq7&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 18:30:59] 接続の事前確認 (PING_60S) を行います...
[2026-01-09 18:30:59] 現在のアクセストークンを検証しています...
[2026-01-09 18:30:59] トークン検証成功。
[2026-01-09 18:30:59] 事前確認 (PING_60S) 成功。
[2026-01-09 18:30:59] 次のアクション 'PING_30S' まで 29.70 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 18:31:29] 接続の事前確認 (PING_30S) を行います...
[2026-01-09 18:31:29] 現在のアクセストークンを検証しています...
[2026-01-09 18:31:29] トークン検証成功。
[2026-01-09 18:31:29] 事前確認 (PING_30S) 成功。
[2026-01-09 18:31:29] 次のアクション 'FINAL_ACTION' まで 29.69 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 18:31:59] エントリー 取引ID 57 (USD/JPY Sell) の実行時刻になりました。
[2026-01-09 18:31:59] --- 取引ID 57 (USD/JPY Sell) のエントリー処理開始 ---
[2026-01-09 18:31:59] 価格情報を取得します。UICs: 42, AssetType: FxSpot, FieldGroups: Quote,DisplayAndFormat,PriceInfo
[2026-01-09 18:31:59] エントリー処理開始 (UIC: 42, Side: Sell, Amount: 50000.0)...
[2026-01-09 18:31:59] UIC 42 の既存取引（ポジション/Working注文）を確認中...
[2026-01-09 18:32:00] UIC 42 の既存取引は見つかりませんでした。
[2026-01-09 18:32:00] 既存取引がないため、新規注文を発注します...
[2026-01-09 18:32:00] 価格情報を取得します。UICs: 42, AssetType: FxSpot, FieldGroups: Quote,DisplayAndFormat
[2026-01-09 18:32:00] 関連注文を確認: 1件
[2026-01-09 18:32:00] ✅ SL注文が成立: OrderId=5358763239, Type=None
[2026-01-09 18:32:00]   関連注文1: OrderId=5358763239, Status=None, Type=None
[2026-01-09 18:32:00] Market + SL 注文送信完了: OrderId=5358763238
[2026-01-09 18:32:00] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 18:32:00] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 18:32:00] ENSイベントを監視中 (OrderID: 5358763238, UIC: 42, タイプ: ['order_fill'])...
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T09:32:00.694094Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Sell', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': 'e340e19d-fa73-4f90-b5e0-e27d1a20f1ac', 'Duration': {'DurationType': 'DayOrder'}, 'ExternalReference': '20260109_trade_57_entry_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358763238', 'OrderRelation': 'IfDoneMaster', 'OrderType': 'Market', 'RelatedOrderId': ['5358763239'], 'RelatedOrderIds': ['5358763239'], 'SequenceId': '2903897241', 'Status': 'Placed', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T09:32:00.694094Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Buy', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': 'e340e19d-fa73-4f90-b5e0-e27d1a20f1ac', 'Duration': {'DurationType': 'GoodTillCancel'}, 'ExternalReference': '20260109_trade_57_entry_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358763239', 'OrderRelation': 'IfDoneSlave', 'OrderType': 'Stop', 'Price': 159.65, 'RelatedOrderId': ['5358763238'], 'RelatedOrderIds': ['5358763238'], 'SequenceId': '2903897242', 'Status': 'Placed', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T09:32:00.695067Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'AveragePrice': 157.646, 'BuySell': 'Sell', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': 'e340e19d-fa73-4f90-b5e0-e27d1a20f1ac', 'Duration': {'DurationType': 'DayOrder'}, 'ExecutionPrice': 157.646, 'ExternalReference': '20260109_trade_57_entry_v1', 'FillAmount': 50000.0, 'FilledAmount': 50000.0, 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358763238', 'OrderRelation': 'IfDoneMaster', 'OrderType': 'Market', 'PositionId': '7426430441', 'RelatedOrderId': ['5358763239'], 'RelatedOrderIds': ['5358763239'], 'SequenceId': '2903897244', 'Status': 'FinalFill', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42, 'ValueDate': '2026-01-14', 'Venue': 'XXXX'}
✨ ENSから注文完全約定イベント: OrderID=5358763238, Price=157.646
[2026-01-09 18:32:01] ★ ENSで期待するイベント(order_fill)を受信しました: {'type': 'order_fill', 'order_id': '5358763238', 'execution_price': Decimal('157.646'), 'execution_time': '2026-01-09T09:32:00.695067Z', 'filled_amount': Decimal('50000.0'), 'amount': Decimal('50000.0'), 'status': 'filled', 'uic': 42, 'position_id': '7426430441'}
[2026-01-09 18:32:01] ✅ エントリー成功: 取引ID 57 (USD/JPY Sell)
[2026-01-09 18:32:02] Discord通知を送信しました。ステータス: 204
[2026-01-09 18:32:02] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 18:32:02] 決済 取引ID 57 (USD/JPY Sell): 目標時刻=18:35:00, ゆらぎ=2.40秒, 最終実行時刻=18:34:57
[2026-01-09 18:32:02] 次のアクション 'PING_60S' まで 115.12 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 18:33:57] 接続の事前確認 (PING_60S) を行います...
[2026-01-09 18:33:57] 現在のアクセストークンを検証しています...
[2026-01-09 18:33:57] トークン検証成功。
[2026-01-09 18:33:57] 事前確認 (PING_60S) 成功。
[2026-01-09 18:33:57] 次のアクション 'PING_30S' まで 29.71 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 18:34:27] 接続の事前確認 (PING_30S) を行います...
[2026-01-09 18:34:27] 現在のアクセストークンを検証しています...
[2026-01-09 18:34:27] トークン検証成功。
[2026-01-09 18:34:27] 事前確認 (PING_30S) 成功。
[2026-01-09 18:34:27] 次のアクション 'FINAL_ACTION' まで 29.71 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 18:34:57] 決済 取引ID 57 (USD/JPY Sell) の実行時刻になりました。
[2026-01-09 18:34:57] --- 取引ID 57 (USD/JPY Sell) の決済処理開始 ---
[2026-01-09 18:34:57] ポジション情報を検索中 (UIC: 42)...
[2026-01-09 18:34:57] UIC 42 の最新ポジションを発見しました。
[2026-01-09 18:34:58] UIC 42 のSL候補注文はありません。追跡IDがないため全Working注文をキャンセルします。
[2026-01-09 18:34:58] 注文キャンセルを実行しました: OrderId=5358763239
[2026-01-09 18:34:58] ポジション 7426430441 (USD/JPY) の決済処理開始...
[2026-01-09 18:34:58] ポジション情報を検索中 (UIC: 42)...
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T09:34:58.353978Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Buy', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': 'e340e19d-fa73-4f90-b5e0-e27d1a20f1ac', 'Duration': {'DurationType': 'GoodTillCancel'}, 'ExternalReference': '20260109_trade_57_entry_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358763239', 'OrderRelation': 'StandAlone', 'OrderType': 'Stop', 'Price': 159.65, 'SequenceId': '2903901924', 'Status': 'Cancelled', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
🧹 SL注文がキャンセル: OrderID=5358763239, Status=cancelled
ENSから注文ステータス変更イベント: OrderID=5358763239, Status=cancelled
[2026-01-09 18:34:58] UIC 42 の最新ポジションを発見しました。
[2026-01-09 18:34:58] 決済注文データ: Buy 50000.0 units of UIC 42
[2026-01-09 18:34:59] USD/JPY の決済注文が受付されました。OrderId: 5358764718
[2026-01-09 18:34:59] 決済注文が受付されました。OrderID: 5358764718
[2026-01-09 18:34:59] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 18:34:59] ENSイベントを監視中 (OrderID: 5358764718, UIC: 42, タイプ: ['order_fill'])...
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T09:34:58.946872Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Buy', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': 'cdc84c8f-2832-464f-b0af-643734cd94ce', 'Duration': {'DurationType': 'DayOrder'}, 'ExternalReference': '20260109_trade_57_exit_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358764718', 'OrderRelation': 'StandAlone', 'OrderType': 'Market', 'SequenceId': '2903901942', 'Status': 'Placed', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T09:34:58.947871Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'AveragePrice': 157.66, 'BuySell': 'Buy', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': 'cdc84c8f-2832-464f-b0af-643734cd94ce', 'Duration': {'DurationType': 'DayOrder'}, 'ExecutionPrice': 157.66, 'ExternalReference': '20260109_trade_57_exit_v1', 'FillAmount': 50000.0, 'FilledAmount': 50000.0, 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358764718', 'OrderRelation': 'StandAlone', 'OrderType': 'Market', 'PositionId': '7426438248', 'SequenceId': '2903901944', 'Status': 'FinalFill', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42, 'ValueDate': '2026-01-14', 'Venue': 'XXXX'}
✨ ENSから注文完全約定イベント: OrderID=5358764718, Price=157.66
[2026-01-09 18:34:59] ★ ENSで期待するイベント(order_fill)を受信しました: {'type': 'order_fill', 'order_id': '5358764718', 'execution_price': Decimal('157.66'), 'execution_time': '2026-01-09T09:34:58.947871Z', 'filled_amount': Decimal('50000.0'), 'amount': Decimal('50000.0'), 'status': 'filled', 'uic': 42, 'position_id': '7426438248'}
[2026-01-09 18:34:59] イベント 'order_fill' により決済を確認しました。
[2026-01-09 18:34:59] ポジション情報を検索中 (UIC: 42)...
[2026-01-09 18:34:59] ClosedPositionsに該当がなくても保有ポジションなしと判定: UIC=42
[2026-01-09 18:35:01] Discord通知を送信しました。ステータス: 204
[2026-01-09 18:35:01] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 18:35:01] エントリー 取引ID 58 (USD/JPY Buy): 目標時刻=18:51:00, ゆらぎ=0.42秒, 最終実行時刻=18:50:59
[2026-01-09 18:35:01] 次のアクション 'PING_60S' まで 898.14 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 18:40:00, last_message_id=49, last_ping_ok_at=2026-01-09 18:40:04, last_ping_rtt_ms=0.3
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=False, contextId=ctx-7950716866-rsamkuq7, messageid=49
[2026-01-09 18:40:06] アクセストークンを更新しています...
[2026-01-09 18:40:08] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7950716866-rsamkuq7&authorization=***&messageid=49
ENS monitor task cancelled
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS接続監視モニターを開始します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7950716866-rsamkuq7, messageid=0
[2026-01-09 18:40:10] アクセストークンを更新しています...
[2026-01-09 18:40:11] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 18:40:11] ENSサブスクリプションを作成中...
[2026-01-09 18:40:11] ストリーミング用ContextId生成: ctx-7951611806-zodky6xd
[2026-01-09 18:40:12] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7951611806-zodky6xd&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7951611806-zodky6xd&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 18:41:52] アクセストークンを更新しています...
[2026-01-09 18:41:53] アクセストークンを正常に更新しました。
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 18:49:59] 接続の事前確認 (PING_60S) を行います...
[2026-01-09 18:49:59] 現在のアクセストークンを検証しています...
[2026-01-09 18:50:00] トークン検証成功。
[2026-01-09 18:50:00] 事前確認 (PING_60S) 成功。
[2026-01-09 18:50:00] 次のアクション 'PING_30S' まで 28.58 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 18:50:29] 接続の事前確認 (PING_30S) を行います...
[2026-01-09 18:50:29] 現在のアクセストークンを検証しています...
[2026-01-09 18:50:29] トークン検証成功。
[2026-01-09 18:50:29] 事前確認 (PING_30S) 成功。
[2026-01-09 18:50:29] 次のアクション 'FINAL_ACTION' まで 29.71 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 18:50:59] エントリー 取引ID 58 (USD/JPY Buy) の実行時刻になりました。
[2026-01-09 18:50:59] --- 取引ID 58 (USD/JPY Buy) のエントリー処理開始 ---
[2026-01-09 18:50:59] 価格情報を取得します。UICs: 42, AssetType: FxSpot, FieldGroups: Quote,DisplayAndFormat,PriceInfo
[2026-01-09 18:50:59] エントリー処理開始 (UIC: 42, Side: Buy, Amount: 50000.0)...
[2026-01-09 18:50:59] UIC 42 の既存取引（ポジション/Working注文）を確認中...
[2026-01-09 18:51:00] UIC 42 の既存取引は見つかりませんでした。
[2026-01-09 18:51:00] 既存取引がないため、新規注文を発注します...
[2026-01-09 18:51:00] 価格情報を取得します。UICs: 42, AssetType: FxSpot, FieldGroups: Quote,DisplayAndFormat
[2026-01-09 18:51:01] 関連注文を確認: 1件
[2026-01-09 18:51:01] ✅ SL注文が成立: OrderId=5358770141, Type=None
[2026-01-09 18:51:01]   関連注文1: OrderId=5358770141, Status=None, Type=None
[2026-01-09 18:51:01] Market + SL 注文送信完了: OrderId=5358770140
[2026-01-09 18:51:01] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 18:51:01] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 18:51:01] ENSイベントを監視中 (OrderID: 5358770140, UIC: 42, タイプ: ['order_fill'])...
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T09:51:01.198829Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Buy', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': '7df32dc8-8e0a-4dfe-af38-289572225506', 'Duration': {'DurationType': 'DayOrder'}, 'ExternalReference': '20260109_trade_58_entry_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358770140', 'OrderRelation': 'IfDoneMaster', 'OrderType': 'Market', 'RelatedOrderId': ['5358770141'], 'RelatedOrderIds': ['5358770141'], 'SequenceId': '2903927230', 'Status': 'Placed', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T09:51:01.198829Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Sell', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': '7df32dc8-8e0a-4dfe-af38-289572225506', 'Duration': {'DurationType': 'GoodTillCancel'}, 'ExternalReference': '20260109_trade_58_entry_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358770141', 'OrderRelation': 'IfDoneSlave', 'OrderType': 'Stop', 'Price': 155.7, 'RelatedOrderId': ['5358770140'], 'RelatedOrderIds': ['5358770140'], 'SequenceId': '2903927231', 'Status': 'Placed', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T09:51:01.199827Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'AveragePrice': 157.697, 'BuySell': 'Buy', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': '7df32dc8-8e0a-4dfe-af38-289572225506', 'Duration': {'DurationType': 'DayOrder'}, 'ExecutionPrice': 157.697, 'ExternalReference': '20260109_trade_58_entry_v1', 'FillAmount': 50000.0, 'FilledAmount': 50000.0, 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358770140', 'OrderRelation': 'IfDoneMaster', 'OrderType': 'Market', 'PositionId': '7426457501', 'RelatedOrderId': ['5358770141'], 'RelatedOrderIds': ['5358770141'], 'SequenceId': '2903927233', 'Status': 'FinalFill', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42, 'ValueDate': '2026-01-14', 'Venue': 'XXXX'}
✨ ENSから注文完全約定イベント: OrderID=5358770140, Price=157.697
[2026-01-09 18:51:01] ★ ENSで期待するイベント(order_fill)を受信しました: {'type': 'order_fill', 'order_id': '5358770140', 'execution_price': Decimal('157.697'), 'execution_time': '2026-01-09T09:51:01.199827Z', 'filled_amount': Decimal('50000.0'), 'amount': Decimal('50000.0'), 'status': 'filled', 'uic': 42, 'position_id': '7426457501'}
[2026-01-09 18:51:01] ✅ エントリー成功: 取引ID 58 (USD/JPY Buy)
[2026-01-09 18:51:02] Discord通知を送信しました。ステータス: 204
[2026-01-09 18:51:02] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 18:51:02] 決済 取引ID 58 (USD/JPY Buy): 目標時刻=18:59:00, ゆらぎ=1.32秒, 最終実行時刻=18:58:58
[2026-01-09 18:51:02] 次のアクション 'PING_60S' まで 415.74 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 18:57:58] 接続の事前確認 (PING_60S) を行います...
[2026-01-09 18:57:58] 現在のアクセストークンを検証しています...
[2026-01-09 18:57:58] トークン検証成功。
[2026-01-09 18:57:58] 事前確認 (PING_60S) 成功。
[2026-01-09 18:57:58] 次のアクション 'PING_30S' まで 29.68 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 18:58:28] 接続の事前確認 (PING_30S) を行います...
[2026-01-09 18:58:28] 現在のアクセストークンを検証しています...
[2026-01-09 18:58:28] トークン検証成功。
[2026-01-09 18:58:28] 事前確認 (PING_30S) 成功。
[2026-01-09 18:58:28] 次のアクション 'FINAL_ACTION' まで 29.70 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 18:58:58] 決済 取引ID 58 (USD/JPY Buy) の実行時刻になりました。
[2026-01-09 18:58:58] --- 取引ID 58 (USD/JPY Buy) の決済処理開始 ---
[2026-01-09 18:58:58] ポジション情報を検索中 (UIC: 42)...
[2026-01-09 18:58:58] UIC 42 の最新ポジションを発見しました。
[2026-01-09 18:58:59] UIC 42 のSL候補注文はありません。追跡IDがないため全Working注文をキャンセルします。
[2026-01-09 18:58:59] 注文キャンセルを実行しました: OrderId=5358770141
[2026-01-09 18:58:59] ポジション 7426457501 (USD/JPY) の決済処理開始...
[2026-01-09 18:58:59] ポジション情報を検索中 (UIC: 42)...
[2026-01-09 18:58:59] UIC 42 の最新ポジションを発見しました。
[2026-01-09 18:58:59] 決済注文データ: Sell 50000.0 units of UIC 42
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T09:58:59.460708Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Sell', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': '7df32dc8-8e0a-4dfe-af38-289572225506', 'Duration': {'DurationType': 'GoodTillCancel'}, 'ExternalReference': '20260109_trade_58_entry_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358770141', 'OrderRelation': 'StandAlone', 'OrderType': 'Stop', 'Price': 155.7, 'SequenceId': '2903939309', 'Status': 'Cancelled', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
🧹 SL注文がキャンセル: OrderID=5358770141, Status=cancelled
ENSから注文ステータス変更イベント: OrderID=5358770141, Status=cancelled
[2026-01-09 18:59:00] USD/JPY の決済注文が受付されました。OrderId: 5358773968
[2026-01-09 18:59:00] 決済注文が受付されました。OrderID: 5358773968
[2026-01-09 18:59:00] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 18:59:00] ENSイベントを監視中 (OrderID: 5358773968, UIC: 42, タイプ: ['order_fill'])...
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T09:59:00.067956Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Sell', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': 'f4977fc3-0884-43c9-8d95-fe349fe8f527', 'Duration': {'DurationType': 'DayOrder'}, 'ExternalReference': '20260109_trade_58_exit_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358773968', 'OrderRelation': 'StandAlone', 'OrderType': 'Market', 'SequenceId': '2903939331', 'Status': 'Placed', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T09:59:00.068956Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'AveragePrice': 157.717, 'BuySell': 'Sell', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': 'f4977fc3-0884-43c9-8d95-fe349fe8f527', 'Duration': {'DurationType': 'DayOrder'}, 'ExecutionPrice': 157.717, 'ExternalReference': '20260109_trade_58_exit_v1', 'FillAmount': 50000.0, 'FilledAmount': 50000.0, 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358773968', 'OrderRelation': 'StandAlone', 'OrderType': 'Market', 'PositionId': '7426462906', 'SequenceId': '2903939333', 'Status': 'FinalFill', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42, 'ValueDate': '2026-01-14', 'Venue': 'XXXX'}
✨ ENSから注文完全約定イベント: OrderID=5358773968, Price=157.717
[2026-01-09 18:59:00] ★ ENSで期待するイベント(order_fill)を受信しました: {'type': 'order_fill', 'order_id': '5358773968', 'execution_price': Decimal('157.717'), 'execution_time': '2026-01-09T09:59:00.068956Z', 'filled_amount': Decimal('50000.0'), 'amount': Decimal('50000.0'), 'status': 'filled', 'uic': 42, 'position_id': '7426462906'}
[2026-01-09 18:59:00] イベント 'order_fill' により決済を確認しました。
[2026-01-09 18:59:00] ポジション情報を検索中 (UIC: 42)...
[2026-01-09 18:59:01] ClosedPositionsに該当がなくても保有ポジションなしと判定: UIC=42
[2026-01-09 18:59:02] Discord通知を送信しました。ステータス: 204
[2026-01-09 18:59:02] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 18:59:02] エントリー 取引ID 59 (USD/JPY Sell): 目標時刻=19:01:00, ゆらぎ=2.63秒, 最終実行時刻=19:00:57
[2026-01-09 18:59:02] 次のアクション 'PING_60S' まで 54.89 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 18:59:53] アクセストークンを更新しています...
[2026-01-09 18:59:54] アクセストークンを正常に更新しました。
[2026-01-09 18:59:57] 接続の事前確認 (PING_60S) を行います...
[2026-01-09 18:59:57] 現在のアクセストークンを検証しています...
[2026-01-09 18:59:57] トークン検証成功。
[2026-01-09 18:59:57] 事前確認 (PING_60S) 成功。
[2026-01-09 18:59:57] 次のアクション 'PING_30S' まで 29.71 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedError, close_code=1006, close_reason=, last_message_at=2026-01-09 19:00:03, last_message_id=65, last_ping_ok_at=2026-01-09 19:00:08, last_ping_rtt_ms=0.4
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=False, contextId=ctx-7951611806-zodky6xd, messageid=65
[2026-01-09 19:00:18] アクセストークンを更新しています...
ENS ping失敗: no close frame received or sent (ConnectionClosedError)
[2026-01-09 19:00:19] アクセストークンを正常に更新しました。
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7951611806-zodky6xd&authorization=***&messageid=65
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
ENS制御メッセージ検出: _resetsubscriptions 対象。再接続します。
ENS WebSocketに再接続を試みています... 1秒後 (試行1)
ENS再接続開始: force_new_context=True, contextId=ctx-7951611806-zodky6xd, messageid=0
[2026-01-09 19:00:22] アクセストークンを更新しています...
[2026-01-09 19:00:23] アクセストークンを正常に更新しました。
ENSサブスクリプションを再作成します...
[2026-01-09 19:00:23] ENSサブスクリプションを作成中...
[2026-01-09 19:00:23] ストリーミング用ContextId生成: ctx-7952823225-b0lqxd2o
[2026-01-09 19:00:23] ENS WebSocket URL: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7952823225-b0lqxd2o&authorization=***
ENS WebSocket接続中: wss://live-streaming.saxobank.com/oapi/streaming/ws/connect?contextId=ctx-7952823225-b0lqxd2o&authorization=***
ENS WebSocket接続成功
ENS WebSocketへの再接続に成功しました。
ENS接続監視モニターを開始します。
[2026-01-09 19:00:27] 接続の事前確認 (PING_30S) を行います...
[2026-01-09 19:00:27] 現在のアクセストークンを検証しています...
[2026-01-09 19:00:27] トークン検証成功。
[2026-01-09 19:00:27] 事前確認 (PING_30S) 成功。
[2026-01-09 19:00:27] 次のアクション 'FINAL_ACTION' まで 29.71 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 19:00:57] エントリー 取引ID 59 (USD/JPY Sell) の実行時刻になりました。
[2026-01-09 19:00:57] --- 取引ID 59 (USD/JPY Sell) のエントリー処理開始 ---
[2026-01-09 19:00:57] 価格情報を取得します。UICs: 42, AssetType: FxSpot, FieldGroups: Quote,DisplayAndFormat,PriceInfo
[2026-01-09 19:00:57] エントリー処理開始 (UIC: 42, Side: Sell, Amount: 50000.0)...
[2026-01-09 19:00:57] UIC 42 の既存取引（ポジション/Working注文）を確認中...
[2026-01-09 19:00:58] UIC 42 の既存取引は見つかりませんでした。
[2026-01-09 19:00:58] 既存取引がないため、新規注文を発注します...
[2026-01-09 19:00:58] 価格情報を取得します。UICs: 42, AssetType: FxSpot, FieldGroups: Quote,DisplayAndFormat
[2026-01-09 19:00:58] 関連注文を確認: 1件
[2026-01-09 19:00:58] ✅ SL注文が成立: OrderId=5358774016, Type=None
[2026-01-09 19:00:58]   関連注文1: OrderId=5358774016, Status=None, Type=None
[2026-01-09 19:00:58] Market + SL 注文送信完了: OrderId=5358774015
[2026-01-09 19:00:58] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 19:00:58] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 19:00:58] ENSイベントを監視中 (OrderID: 5358774015, UIC: 42, タイプ: ['order_fill'])...
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T10:00:58.711552Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Sell', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': 'db25e2d6-b895-4de1-993c-e00359987c12', 'Duration': {'DurationType': 'DayOrder'}, 'ExternalReference': '20260109_trade_59_entry_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358774015', 'OrderRelation': 'IfDoneMaster', 'OrderType': 'Market', 'RelatedOrderId': ['5358774016'], 'RelatedOrderIds': ['5358774016'], 'SequenceId': '2903941804', 'Status': 'Placed', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T10:00:58.711552Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Buy', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': 'db25e2d6-b895-4de1-993c-e00359987c12', 'Duration': {'DurationType': 'GoodTillCancel'}, 'ExternalReference': '20260109_trade_59_entry_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358774016', 'OrderRelation': 'IfDoneSlave', 'OrderType': 'Stop', 'Price': 159.72, 'RelatedOrderId': ['5358774015'], 'RelatedOrderIds': ['5358774015'], 'SequenceId': '2903941805', 'Status': 'Placed', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T10:00:58.712589Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'AveragePrice': 157.715, 'BuySell': 'Sell', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': 'db25e2d6-b895-4de1-993c-e00359987c12', 'Duration': {'DurationType': 'DayOrder'}, 'ExecutionPrice': 157.715, 'ExternalReference': '20260109_trade_59_entry_v1', 'FillAmount': 50000.0, 'FilledAmount': 50000.0, 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358774015', 'OrderRelation': 'IfDoneMaster', 'OrderType': 'Market', 'PositionId': '7426477667', 'RelatedOrderId': ['5358774016'], 'RelatedOrderIds': ['5358774016'], 'SequenceId': '2903941807', 'Status': 'FinalFill', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42, 'ValueDate': '2026-01-14', 'Venue': 'XXXX'}
✨ ENSから注文完全約定イベント: OrderID=5358774015, Price=157.715
[2026-01-09 19:00:59] ★ ENSで期待するイベント(order_fill)を受信しました: {'type': 'order_fill', 'order_id': '5358774015', 'execution_price': Decimal('157.715'), 'execution_time': '2026-01-09T10:00:58.712589Z', 'filled_amount': Decimal('50000.0'), 'amount': Decimal('50000.0'), 'status': 'filled', 'uic': 42, 'position_id': '7426477667'}
[2026-01-09 19:00:59] ✅ エントリー成功: 取引ID 59 (USD/JPY Sell)
[2026-01-09 19:01:00] Discord通知を送信しました。ステータス: 204
[2026-01-09 19:01:00] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 19:01:00] 決済 取引ID 59 (USD/JPY Sell): 目標時刻=19:06:00, ゆらぎ=0.54秒, 最終実行時刻=19:05:59
[2026-01-09 19:01:00] 次のアクション 'PING_60S' まで 238.61 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 19:04:59] 接続の事前確認 (PING_60S) を行います...
[2026-01-09 19:04:59] 現在のアクセストークンを検証しています...
[2026-01-09 19:04:59] トークン検証成功。
[2026-01-09 19:04:59] 事前確認 (PING_60S) 成功。
[2026-01-09 19:04:59] 次のアクション 'PING_30S' まで 29.67 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 19:05:29] 接続の事前確認 (PING_30S) を行います...
[2026-01-09 19:05:29] 現在のアクセストークンを検証しています...
[2026-01-09 19:05:29] トークン検証成功。
[2026-01-09 19:05:29] 事前確認 (PING_30S) 成功。
[2026-01-09 19:05:29] 次のアクション 'FINAL_ACTION' まで 29.72 秒待機します...
ENS制御メッセージ検出: Heartbeat Reason=NoNewData
[2026-01-09 19:05:59] 決済 取引ID 59 (USD/JPY Sell) の実行時刻になりました。
[2026-01-09 19:05:59] --- 取引ID 59 (USD/JPY Sell) の決済処理開始 ---
[2026-01-09 19:05:59] ポジション情報を検索中 (UIC: 42)...
[2026-01-09 19:05:59] UIC 42 の最新ポジションを発見しました。
[2026-01-09 19:06:00] UIC 42 のSL候補注文はありません。追跡IDがないため全Working注文をキャンセルします。
[2026-01-09 19:06:00] 注文キャンセルを実行しました: OrderId=5358774016
[2026-01-09 19:06:00] ポジション 7426477667 (USD/JPY) の決済処理開始...
[2026-01-09 19:06:00] ポジション情報を検索中 (UIC: 42)...
[2026-01-09 19:06:00] UIC 42 の最新ポジションを発見しました。
[2026-01-09 19:06:00] 決済注文データ: Buy 50000.0 units of UIC 42
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T10:06:00.229137Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Buy', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': 'db25e2d6-b895-4de1-993c-e00359987c12', 'Duration': {'DurationType': 'GoodTillCancel'}, 'ExternalReference': '20260109_trade_59_entry_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358774016', 'OrderRelation': 'StandAlone', 'OrderType': 'Stop', 'Price': 159.72, 'SequenceId': '2903948872', 'Status': 'Cancelled', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
🧹 SL注文がキャンセル: OrderID=5358774016, Status=cancelled
ENSから注文ステータス変更イベント: OrderID=5358774016, Status=cancelled
[2026-01-09 19:06:00] USD/JPY の決済注文が受付されました。OrderId: 5358775355
[2026-01-09 19:06:00] 決済注文が受付されました。OrderID: 5358775355
[2026-01-09 19:06:00] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 19:06:00] ENSイベントを監視中 (OrderID: 5358775355, UIC: 42, タイプ: ['order_fill'])...
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T10:06:00.806175Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'BuySell': 'Buy', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': '4de60168-fed7-48c1-b571-dce54105d585', 'Duration': {'DurationType': 'DayOrder'}, 'ExternalReference': '20260109_trade_59_exit_v1', 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358775355', 'OrderRelation': 'StandAlone', 'OrderType': 'Market', 'SequenceId': '2903948894', 'Status': 'Placed', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42}
ENS Orderイベント受信: {'AccountId': '77800/S151366', 'AccountKey': 'FZK2EfPkggeOr1eLieG3vA==', 'ActivityTime': '2026-01-09T10:06:00.807154Z', 'ActivityType': 'Orders', 'Amount': 50000.0, 'AssetType': 'FxSpot', 'AveragePrice': 157.703, 'BuySell': 'Buy', 'ClientId': '21121324', 'ClientKey': 'XMiQ5Rj3BZ4gVCTmNNhgVw==', 'CorrelationKey': '4de60168-fed7-48c1-b571-dce54105d585', 'Duration': {'DurationType': 'DayOrder'}, 'ExecutionPrice': 157.703, 'ExternalReference': '20260109_trade_59_exit_v1', 'FillAmount': 50000.0, 'FilledAmount': 50000.0, 'HandledBy': '21121324', 'IsSecondCurrencyOrder': False, 'OrderId': '5358775355', 'OrderRelation': 'StandAlone', 'OrderType': 'Market', 'PositionId': '7426484803', 'SequenceId': '2903948896', 'Status': 'FinalFill', 'SubStatus': 'Confirmed', 'Symbol': 'USDJPY', 'Uic': 42, 'ValueDate': '2026-01-14', 'Venue': 'XXXX'}
✨ ENSから注文完全約定イベント: OrderID=5358775355, Price=157.703
[2026-01-09 19:06:01] ★ ENSで期待するイベント(order_fill)を受信しました: {'type': 'order_fill', 'order_id': '5358775355', 'execution_price': Decimal('157.703'), 'execution_time': '2026-01-09T10:06:00.807154Z', 'filled_amount': Decimal('50000.0'), 'amount': Decimal('50000.0'), 'status': 'filled', 'uic': 42, 'position_id': '7426484803'}
[2026-01-09 19:06:01] イベント 'order_fill' により決済を確認しました。
[2026-01-09 19:06:01] ポジション情報を検索中 (UIC: 42)...
[2026-01-09 19:06:01] ClosedPositionsに該当がなくても保有ポジションなしと判定: UIC=42
[2026-01-09 19:06:03] Discord通知を送信しました。ステータス: 204
[2026-01-09 19:06:03] 取引ステータスを trade_status.json に保存しました。
[2026-01-09 19:06:03] 本日の全取引が終了しました。
[2026-01-09 19:06:03] CSV内の全取引を処理しました。サマリーを生成中...
[2026-01-09 19:06:03] 口座残高を取得しています...
[2026-01-09 19:06:03] 口座残高: 990704.0 JPY
[2026-01-09 19:06:04] Discord通知を送信しました。ステータス: 204
[2026-01-09 19:06:04] 日次サマリー送信後、trade_status.json を削除しました。
[2026-01-09 19:06:04] クリーンアップ処理を行います。
[2026-01-09 19:06:04] クライアントからトークンとアカウント/クライアントキーをクリアしました。
ENS WebSocketを切断します...
ENS WebSocket接続が閉じられました。
ENS接続断の詳細: reason=ConnectionClosed, exception=ConnectionClosedOK, close_code=1000, close_reason=, last_message_at=2026-01-09 19:06:01, last_message_id=22, last_ping_ok_at=2026-01-09 19:06:00, last_ping_rtt_ms=0.4
ENS WebSocketを切断しました。
[2026-01-09 19:06:06] Discord通知を送信しました。ステータス: 204
[2026-01-09 19:06:06] プログラムを正常に終了しました。
ENS monitor task cancelled

[Done] exited with code=0 in 45870.964 seconds

